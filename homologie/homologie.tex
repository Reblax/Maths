\documentclass{article}
\usepackage{amsmath, amssymb, amsfonts, amsthm}
\usepackage[english]{babel}
\usepackage{geometry}[textwidth=10cm]
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{fontawesome5}
\usepackage{nicefrac}
\usepackage{cancel}
\usetikzlibrary{positioning}
\usetikzlibrary{decorations.pathmorphing}

\newcommand{\id}{\mathrm{id}}
\newcommand{\op}{\mathrm{op}}
\newcommand{\inj}{\mathrm{inj}}
\newcommand{\sing}{\mathrm{sing}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\U}{\mathbb{U}}
\newcommand{\F}{\mathbb{F}}
\renewcommand{\H}{\mathbb{H}}

\renewcommand{\P}{\mathbb{P}}
\renewcommand{\d}{{\rm \, d}}

\newcommand{\asympt}{\mathop{\sim}}
\newcommand{\lin}{\mathcal{L}}
\newcommand{\M}{\mathcal{M}}
\newcommand{\cat}{\mathcal{C}}
\newcommand{\catt}{\mathcal{D}}
\newcommand{\rel}{\mathcal{R}}
\newcommand{\Jcat}{\mathcal{J}}
\newcommand{\Acat}{\mathcal{A}}

\newcommand{\Set}{\mathbf{Set}}
\newcommand{\Top}{\mathbf{Top}}
\newcommand{\Grp}{\mathbf{Grp}}
\newcommand{\Mod}{\mathbf{Mod}}
\newcommand{\Ab}{\mathbf{Ab}}
\newcommand{\Vectcat}{\mathbf{Vect}}
\newcommand{\Rep}{\mathbf{Rep}}
\newcommand{\Ring}{\mathbf{Ring}}

%Operators
\DeclareMathOperator{\Acc}{Acc}
\DeclareMathOperator{\arccosh}{arccosh}
\DeclareMathOperator{\Card}{Card}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\PSL}{PSL}
\DeclareMathOperator{\PGL}{PGL}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\pgcd}{pgcd}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\rg}{rg}
\DeclareMathOperator{\Ch}{Ch}
\DeclareMathOperator{\sh}{sh}
\DeclareMathOperator{\Vect}{Vect}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\rk}{rk}
\DeclareMathOperator{\Fix}{Fix}
\DeclareMathOperator{\Ob}{Ob}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\Mor}{Mor}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Fun}{Fun}
\DeclareMathOperator{\Nat}{Nat}
\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\cod}{cod}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\coim}{coim}
\renewcommand{\th}{\mathop{\rm th}}
\renewcommand{\Re}{\mathop{\rm Re}}
\renewcommand{\Im}{\mathop{\rm Im}}

\newcommand{\todo}{\textbf{TODO}}

\renewcommand{\epsilon}{\varepsilon}
\newcommand{\invlim}{\varprojlim}
\newcommand{\dirlim}{\varinjlim}

\newcommand{\esh}{{\textstyle \int}}

%Macros
\newcommand{\applic}[4]{\begin{array}[t]{rcl}
#1 & \to & #2 \\
#3 & \mapsto & #4
\end{array}}
\newcommand{\warning}{\faExclamationTriangle \hspace{3pt}}

\setlength{\parindent}{0pt}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{examples}[theorem]{Examples}


\theoremstyle{remark}
\newtheorem*{remark}{Remark}
\newtheorem*{exercise}{Exercise}

\title{Homological Algebra}
\author{Original lectures notes by Baptiste Rognerud, but now typeset in \LaTeX}
\date{}

\begin{document}
\maketitle

\section{Introduction to category theory}

References:
\begin{itemize}
    \item Emily Riehl, Category Theory in Context (chapter I)
    \item Saunders Mac Lane, Categories for the Working Mathematician
    \item Ibrahim Assem, Introduction au langage cat√©gorique (chapters I, II)
\end{itemize}

\faChevronRight \space Near 1945 Eilenberg and Mac Lane gave the good formalism for a ``natural isomorphism'' (the general theory of natural transformations). For instance, if $V$ is a finite-dimensional vector space, $V \simeq V^*$ and $V \simeq V^{**}$, but the first isomorphism is not natural (``a choice needs to be made''), while the second is. But why? \\
It turns out solving this question gave a formalism, category theory, that unified already existing mathematical concepts, gave new links between different notions and also gave new questions! \\
\warning Category theory is not a theory that trivializes mathematics. \\
It is used today by (almost) everyone: algebraic geometry, algebra, representation theory, topology, combinatorics, \dots

\subsection{Categories and functors}

\begin{definition}
    A \emph{category} $\cat$ is the data of
    \begin{itemize}
        \item A collection of \emph{morphisms} $\Mor(\cat)$
        \item A collection of \emph{objects} $\Ob(\cat)$
    \end{itemize}
    such that
    \begin{enumerate}
        \item Every morphism $f \in \Mor(\cat)$ has a specified domain $X \in \Ob(\cat)$ and codomain $Y \in \Ob(\cat)$. We write $f : X \to Y$.
        \item For every object $X \in \Ob(\cat)$ there exists a morphism $1_X : X \to X$ (the \emph{identity} of $X$), also written $\id_X$
        \item For any three objects $X,Y,Z \in \Ob(\cat)$ and morphism $f : X \to Y$ and $g : Y \to Z$ there exists a morphism $g\circ f : X \to Z$ (we often omit $\circ$ and just write $gf$)
    \end{enumerate}
    satisfying
    \begin{description}
        \item[(Identity)] $\forall f : X \to Y, 1_Y f = f = f 1_X$
        \item[(Associativity)] $\forall f : W \to X, g : X \to Y, h : Y \to Z$, $h(gf) = (hg)f$
    \end{description}
\end{definition}

\begin{remark} \leavevmode
    \begin{enumerate}
        \item We use the term ``collection'' because we don't want to worry about set-theoretical issues
        \item If $\Mor(\cat)$ is a set, we say that $\cat$ is \emph{small}
        \item We denote by $\Hom_\cat (X,Y)$ (or $\cat(X,Y)$) the collection of $f : X \to Y \in \Mor(\cat)$
    \end{enumerate}
\end{remark}

\begin{examples}[Concrete categories] \leavevmode
    \begin{enumerate}
        \item The category $\Set$, where objects are sets and morphisms are just maps.
        \item $\Top$, where objects are topological spaces and morphisms are continuous maps.
        \item Groups together with group homomorphisms form a category called $\Grp$. The same can be said about rings, fields\dots
        \item $k$-vector spaces, or more generally left/right $R$-modules, together with linear maps, form a category denoted $R\Mod$ or $\Mod R$ (for left or right $R$-modules).
    \end{enumerate}
\end{examples}

In these previous examples, objects are sets with additional structure, and morphisms between two objects are in particular maps between the two underlying sets. Such categories are called \emph{concrete categories} (a rigorous definition will be given later). However, a category need not be concrete.

\begin{examples}[Abstract categories] \leavevmode
    \begin{enumerate}
        \item Let $k$ be a field. There exists a category $\mathbf{Mat}_k$ where objects are the natural numbers $\N$ and morphisms are $\Hom(m,n) = \mathrm{Mat}_{n,m} (k)$, where composition is given by matrix multiplication.
        \item If $G$ is a group, there exists a category $BG$ which has only one object $\bullet$, and morphisms $\Hom(\bullet, \bullet) = G$, where composition is multiplication in $G$.
        \item If $(P,\le)$ is a \emph{poset} (a partially ordered set, that is a set $P$ together with a reflexive, transitive relation $\le$), then one can construct a category $\hat{P}$ by setting $\Ob(\hat{P}) = P$ and $|\Hom(x,y)| = \begin{cases}
            1 & \text{if $x\le y$} \\ 0 & \text{otherwise}
        \end{cases}$, where composition is defined in the only possible way.
        \item The homotopy category of topological spaces: objects are topological spaces, and $\Hom(X,Y)$ is $\Hom_\Top(X,Y)/\sim$ where $\sim$ is homotopy of continuous maps.
    \end{enumerate}
\end{examples}

\begin{exercise}
    Check the categories defined above really are categories. In (2), what are the minimal hypotheses needed on $G$ for $BG$ to be a category? In (3), what are the minimal hypotheses needed on $\le$ for $\hat{P}$ to be a category?
\end{exercise}

\begin{examples}[Categories constructed from categories] \leavevmode
    \begin{enumerate}
        \item If $\cat$ is a category, one can construct its \emph{opposite category} $\cat^\op$, defined by $\Ob(\cat^\op) = \Ob(\cat)$ and $\Hom_{\cat^\op}(X,Y) = \Hom_\cat(Y,X)$, with composition described by the following diagram:
        \begin{center}
            \begin{tikzcd}
                X \arrow[d, "f"] \arrow[dd, "gf", bend right, '] \arrow[dd,phantom,bend left,""{name=U}] & X \\
                Y \arrow[d, "g"] & Y \arrow[u,"f^\text{op}"] \\
                Z & Z \arrow[u, "g^\text{op}"] \arrow[uu, "f^\text{op}g^\text{op}", ', bend right] \arrow[uu,bend left,""{name=V},phantom]
                \arrow[from=U,to=V,squiggly]
            \end{tikzcd}
        \end{center}
        \item Let $\cat$ be a category. A \emph{subcategory} $\catt$ of $\cat$ is another category such that $\Ob(\catt) \subset \Ob(\cat)$ and $\Mor(\catt) \subset \Mor(\cat)$ and the composition in $\catt$ is induced by the one in $\cat$. For instance, $\Ab$, the category of abelian groups and group homomorphisms, is a subcategory of $\Grp$.
        \item Let $\cat$ and $\catt$ be categories. The \emph{product category} of $\cat$ and $\catt$ is the category $\cat \times \catt$ defined by $\Ob(\cat \times \catt) = \Ob(\cat) \times \Ob(\catt)$ and $\Mor(\cat \times \catt) = \Mor(\cat) \times \Mor(\catt)$, composition and identities being defined componentwise.
    \end{enumerate}
\end{examples}

\begin{exercise}
    Describe $(BG)^\op$ for $G$ a group and $\hat{P}^\op$ for $(P,\le)$ a poset.
\end{exercise}

\warning $\Set^\op$ is not $\Set$. \todo

\begin{remark}
    In a category $\cat$ the objects can be anything, so saying $x \in X$ for $X \in \Ob(\cat)$ doesn't make sense. Hence, categorical notions are defined using arrows and not elements.
\end{remark}

\begin{definition}
    Let $\cat$ be a category.
    \begin{enumerate}
        \item $f : X \to Y$ is an \emph{isomorphism} if there exists $g : Y \to X$ such that $gf = \id_X$ and $fg = \id_Y$.
        \item $f : X \to Y$ is a \emph{monomorphism} if for all $g,h : W \to X$ such that $fg = fh$, $g=h$ ($f$ is left-cancellable).
        \item $f : X \to Y$ is an \emph{epimorphism} if for all $g,h : Y \to Z$ such that $gf = hf$, $g=h$ ($f$ is right-cancellable).
    \end{enumerate}
\end{definition}

\warning Being both a mono and an epi doesn't imply being an iso. \todo

\begin{definition}
    Let $\cat,\catt$ be two categories. A \emph{(covariant) functor} $F : \cat \to \catt$ is the data of
    \begin{itemize}
        \item An object $F(X) \in \Ob(\catt)$ for all $X \in \Ob(\cat)$
        \item A morphism $F(f) \in \Hom_\catt(F(X), F(Y))$ for all $f \in \Hom_\cat (X,Y)$
    \end{itemize}
    such that $F(\id_X) = \id_{F(X)}$ for all $X \in \Ob(\cat)$ and $F(gf) = F(g)F(f)$ whenever $f,g \in \Mor(\cat)$ are composable. 
\end{definition}

\begin{definition}
    A \emph{contravariant} functor from $\cat$ to $\catt$ is a functor from $\cat^\op$ to $\catt$ (so composition is reversed, i.e. $F(gf) = F(f)F(g)$).
\end{definition}

\begin{examples} \leavevmode
    \begin{enumerate}
        \item $U : \Grp \to \Set, U(G) = G, U(f) = f$ the functor that to a group assigns it its underlying set and to a homomorphism the underlying map. It is called the \emph{forgetful functor} from groups to sets, because it forgets the group structure.
        \item $U : \applic{\mathbf{Ass}}{\mathbf{Lie}}{(A,+,\cdot)}{(A,+,[-,-])}$ the forgetful functor from the category of associative algebras to the category of Lie algebras. It forgets the ``associative structure'' but remembers the underlying abelian group.
        \item $F : \Set \to \Ab, X \mapsto \Z[X], f \mapsto \Z[f]$, which to a set assigns the free abelian group with basis $X$ (the group of finite linear combinations of elements of $X$). A map $f : X \to Y$ can then be uniquely extended to a linear map $\Z[f] : \Z[X] \to \Z[Y]$ that agrees with $f$ on the bases of $\Z[X]$ and $\Z[Y]$.
        \item Suppose $\cat$ is locally small (i.e. for any $X,Y$, $\Hom_\cat(X,Y)$ is a set). For all $X \in \cat$, $\Hom(X,-)$ is a functor $\cat \to \Set$. Similarly, $\Hom_\cat(-,X)$ is a contravariant functor $\cat \to \Set$. $\Hom_\cat(-,-)$ is a functor $\cat \times \cat^\op \to \Set$.
        \item Functors $\cat \xrightarrow[F]{} \catt \xrightarrow[G]{} \mathcal{E}$ can be composed in the obvious sense.
    \end{enumerate}
\end{examples}

\todo : DRAW DIAGRAMS

\begin{definition}
    Let \begin{tikzcd}
        \cat \arrow[r,bend left, "F"] \arrow[r,bend right, "G",'] & \catt
    \end{tikzcd} be two functors. A \emph{natural transformation} $\eta$ from $F$ to $G$ is the data of morphisms $\eta_X : F(X) \to G(X) \in \Mor(\catt)$ for all $X \in \Ob(\cat)$ such that for all $f : X \to Y \in \Mor(\cat)$, the diagram
    \begin{center}
        \begin{tikzcd}
            F(X) \arrow[r, "\eta_X"] \arrow[d, "F(f)"] & G(X) \arrow[d, "G(f)"] \\
            F(Y) \arrow[r, "\eta_Y"] & G(Y)
        \end{tikzcd}
    \end{center}
    commutes, that is $G(f)\eta_X = \eta_Y F(f)$. We write $\eta : F \Rightarrow G$ or draw \begin{tikzcd}
        \cat \arrow[r,bend left, "F"] \arrow[r,bend left, phantom, ""{name=U}] \arrow[r,bend right, "G"{name=V},'] \arrow[r,bend right, phantom, ""{name=V},'] & \catt \arrow[Rightarrow, from=U,to=V,"\eta"]
    \end{tikzcd}
\end{definition}

\begin{example}
    Let $V$ be a $k$-vector space. $\id_{\mathbf{Vect}_k}$ and $D^2 = \Hom_{\mathbf{Vect}_k}(\Hom_{\mathbf{Vect}_k}(-,k),k)$ are two endofunctors of $\mathbf{Vect}_k$. $\mathrm{ev}_- : \applic{V}{V^{**}}{v}{\applic{\Hom(V,k)}{k}{\phi}{\phi(v)}}$ defines a natural transformation between them:
    \begin{center}
        \begin{tikzcd}
            V \arrow[r, "\mathrm{ev}"] \arrow[d, "f",'] & V^{**} \arrow[d, "D^2(f)"] \\
            W \arrow[r, "\mathrm{ev}",'] & W^{**}
        \end{tikzcd}
    \end{center}
    For $a \in V$, $D^2 (f) \circ \mathrm{ev}_a : \applic{W^*}{k}{\phi}{\phi(f(a))} \in W^{**}$ and in the other direction $(\mathrm{ev} \circ f)(a) = \mathrm{ev}_{f(a)}$. \\
    However, there is no natural transformation from $\id_{\Vectcat_k}$ to $D$. For one, the first is covariant and the second is contravariant. To get a natural transformation from a covariant to a contravariant functor, we can modify the definition of naturality to be that \begin{tikzcd}[column sep=tiny, row sep = small]
        V \arrow[r] \arrow[d] & V^* \\ W \arrow[r] & W^* \arrow[u]
    \end{tikzcd}
    commutes, but even such natural transformations do not exist from $\id_{\Vectcat_k}$ to $D$.
\end{example}

\begin{definition}
    A natural transformation \begin{tikzcd}
        \cat \arrow[r,bend left, "F"] \arrow[r,bend left, phantom, ""{name=U}] \arrow[r,bend right, "G"{name=V},'] \arrow[r,bend right, phantom, ""{name=V},'] & \catt \arrow[Rightarrow, from=U,to=V,"\eta"]
    \end{tikzcd} is a \emph{natural isomorphism} if $\eta_X$ is an isomorphism for all $X \in \Ob(\cat)$.
\end{definition}

\begin{remark}
    One can compose natural transformations in two ways, ``vertical composition'':
    \begin{center}
        \begin{tikzcd}[row sep=huge]
            \mathcal{C}
             \arrow[r, bend left=65, "F"{name=F}]
             \arrow[r, "G"{inner sep=0,fill=white,anchor=center,name=G}]
             \arrow[r, bend right=65, "H"{name=H, swap}]
             \arrow[from=F.south-|G,to=G,Rightarrow,shorten=2pt,"\alpha"] 
             \arrow[from=G,to=H.north-|G,Rightarrow,shorten=2pt,"\beta"] &
           \mathcal{D} \arrow[r,squiggly] &
           \mathcal{C} \arrow[r, bend left=30,"F"{name=U}] \arrow[r,bend right=30, "H"{name=D},'] \arrow[from=U.south,to=D.north,Rightarrow, "\beta \circ \alpha",shorten=2pt] &
           \mathcal{D}
        \end{tikzcd}
        where $(\beta\circ \alpha)_X = \beta_X \circ \alpha_X$
    \end{center}
    or ``horizontal composition'':
    \begin{center}
        \begin{tikzcd}[row sep=huge]
            \mathcal{C}
             \arrow[r, bend left=30, "F_1"{name=F}]
             \arrow[r, bend right=30, "G_1"{name=H, swap}]
             \arrow[from=F.south-|H,to=H.north,Rightarrow,shorten=2pt,"\alpha_1"] &
           \mathcal{D}
           \arrow[r, bend left=30, "F_2"{name=FF}]
             \arrow[r, bend right=30, "G_2"{name=HH, swap}]
             \arrow[from=FF.south-|HH,to=HH.north,Rightarrow,shorten=2pt,"\alpha_2"] &
            \mathcal{E} \arrow[r,squiggly] &
            \mathcal{C} \arrow[rr, bend left=30,"F_2\circ F_1"{name=U}] \arrow[rr,bend right=30, "G_2\circ G_1"{name=D},'] \arrow[from=U.south,to=D.north,Rightarrow, "\alpha_2 * \alpha_1",shorten=2pt] & &
           \mathcal{E}
        \end{tikzcd}
        where $(\alpha_2 * \alpha_1)_X = G_2({(\alpha_1)}_{X}) \circ {(\alpha_2)}_{F_1(X)} $
    \end{center}
    Horizontal composition can also be defined in another equivalent way using commutativity of
    \begin{center}
        \begin{tikzcd}
            F_2 F_1(X) \arrow[r,"(\alpha_2)_{F_1(X)}"] \arrow[d,"F_2((\alpha_1)_X)",'] & G_2 F_1(X) \arrow[d,"G_2((\alpha_1)_X)"]  \\
            F_2 G_1(X) \arrow[r,"(\alpha_2)_{G_1(X)}"] & G_2 G_1 (X)
        \end{tikzcd}
    \end{center}
    The diagram commutes by naturality of $\alpha_2$, so $(\alpha_2 * \alpha_1) = (\alpha_2)_{G_1(X)} \circ F_2((\alpha_1)_X)$.
\end{remark}

\begin{definition}
    Let $\cat,\catt$ be two categories. Then the \emph{functor category from $\cat$ to $\catt$} written $\Fun(\cat,\catt)$ or $\catt^\cat$ is the category whose objects are functors from $\cat$ to $\catt$ and morphisms are natural transformations.
\end{definition}

\begin{remark}
    Categories, together with functors and natural transformations between them is the prototypal example of a 2-category.
\end{remark}

\subsection{Equivalences of categories}

\begin{definition}
    Let $\cat$ and $\catt$ be two categories. An \emph{equivalence of categories} from $\cat$ to $\catt$ is the data of
    \begin{enumerate}
        \item $F : \cat \to \catt$ and $G : \catt \to \cat$ wo functors
        \item Natural isomorphisms $\eta : 1_\cat \Rightarrow GF$ and $\epsilon : FG \Rightarrow 1_\catt$ where $1_\cat$ and $1_\catt$ are the identity functors of $\cat$ and $\catt$.
    \end{enumerate}
\end{definition}

\begin{remark} \leavevmode
    \begin{enumerate}
        \item $G$ is called a \emph{quasi-inverse} of $F$.
        \item Most of the time we say that $F$ is an equivalence if there exists $G$ such that $(F,G)$ is an equivalence.
        \item If $F,G$ are contravariant, we speak of \emph{duality} between $\cat$ and $\catt$.
        \item If two categories are equivalent, every property that can be expressed ``in terms of arrows'' is preserved.
    \end{enumerate}
\end{remark}

\begin{definition}
    Let $F : \cat \to \catt$ be a functor. Then, we say
    \begin{enumerate}
        \item $F$ is \emph{faithful} if $\forall X,Y \in \Ob(\cat)$, $F : \applic{\Hom_\cat(X,Y)}{\Hom_\catt(F(X),F(Y))}{f}{F(f)}$ is injective.
        \item $F$ is \emph{full} if the previous map is surjective.
        \item $F$ is \emph{essentially surjective} if for all $ Y \in \Ob(\catt)$ there is $X \in \Ob(\cat)$ such that $F(X) \simeq Y$ in $\catt$.
    \end{enumerate}
\end{definition}

\begin{theorem}
    Let $F : \cat \to \catt$ be a functor. Then $F$ is an equivalence of categories if and only if it is fully faithful and essentially surjective. 
\end{theorem}

\begin{proof}
    \warning There is a little set-theoretic issue: an equivalence of categories is always fully faithful and essentially surjective, but the converse requires the axiom of choice for the class $\Ob(\cat)$. \\
    Suppose $F : \cat \to \catt$ is an equivalence of categories, and let $G : \catt \to \cat$ be a quasi-inverse of $F$, together with natural isomorphisms $\eta : 1_\cat \to GF$ and $\epsilon : 1_\catt \to FG$. If $Y$ is an object of $\catt$, then $Y \simeq FG(Y)$, so $F$ is essentially surjective. Let $X,Y$ be objects of $\cat$. To show $F$ is fully faithful we will construct an inverse to $F : \Hom_\cat (X,Y) \to \Hom_\catt (F(X),F(Y))$. For any $f \in \Hom_\catt(F(X),F(Y))$, we have a commutative diagram
    \begin{center}
        \begin{tikzcd}[cramped]
            X \arrow[r, "\eta_X"] \arrow[d, "f",'] & GF(X) \arrow[d, "GF(f)"] \\
            Y \arrow[r, "\eta_Y"] & GF(Y)
        \end{tikzcd}
    \end{center}
    which prompts us to define $\phi : \applic{\Hom_\catt (F(X),F(Y))}{\Hom_\cat (X,Y)}{g}{\eta_Y^{-1} \circ G(g) \circ \eta_X}$. We now check it is the map we're looking for. If $f : X \to Y$, since the above diagram commutes and $\eta_Y$ is invertible, we get that $\phi(F(f)) = f$, so $\phi \circ F = \id_{\Hom_\cat (X,Y)}$, which means $F$ is faithful. We have two commutative diagrams, by definition of $\phi$ and by naturality of $\eta$:
    \begin{center}
        \begin{tikzcd}[cramped]
            X \arrow[r, "\eta_X"] \arrow[d, "\phi(g)",'] & GF(X) \arrow[d, "G(g)"] \\
            Y \arrow[r, "\eta_Y"] & GF(Y)
        \end{tikzcd}
        \hspace{1.5cm}
        \begin{tikzcd}[cramped]
            X \arrow[r, "\eta_X"] \arrow[d, "\phi(g)",'] & GF(X) \arrow[d, "GF(\phi(g))"] \\
            Y \arrow[r, "\eta_Y"] & GF(Y)
        \end{tikzcd}
    \end{center}
    therefore, $G(g) \circ \eta_X = GF(\phi(g)) \circ \eta_X$.
    Since $\eta_X$ is invertible, $G(g) = GF(\phi(g))$. The previous point shows that $G$ is faithful, so $g = F(\phi(g))$, hence $F$ is full. \\
    Now suppose $F$ is fully faithful and essentially surjective. Our goal is to construct $G$. For any $Y \in \Ob(\catt)$, since $F$ is essentially surjective, there exists $X_Y \in \Ob(\cat)$ and an isomorphism $\epsilon_Y : Y \to F(X_Y)$. Therefore, for any $Y,Z\in \Ob(\catt)$ and $f:Y \to Z$, we have a commutative diagram
    \begin{center}
        \begin{tikzcd}
            Y \arrow[d, "\epsilon_Y"] \arrow[r, "f"] & Z \arrow[d, "\epsilon_Z"] \\
            F(X_Y) \arrow[r, "\epsilon_Z \circ f \circ \epsilon_Y^{-1}",'] & F(X_Z)
        \end{tikzcd}
    \end{center}
    Which leads us to define $G(Y) = X_Y$ and $G(f)$ to be the unique morphism $m_f : X_Y \to X_Z$ such that $F(m_f) = \epsilon_Z \circ f \circ \epsilon_Y^{-1}$ (this works because $F$ is fully faithful). We have $G(\id_Y) = \id_{X_Y}$ since $\varepsilon_Y \circ \id_Y \circ \varepsilon_Y^{-1} = \id_Y$ and $F(\id_{X_Y}) = \id_Y$. The next diagram shows $G(g\circ f) = G(g)\circ G(f)$:
    \begin{center}
        \begin{tikzcd}
            W \arrow[d, "\epsilon_W"] \arrow[r,"f"] \arrow[rr, bend left, "g\circ f"] & Y \arrow[d, "\epsilon_Y"] \arrow[r, "g"] & Z \arrow[d, "\epsilon_Z"] \\
            F(X_W) \arrow[r,"F(m_f)",'] \arrow[rr, bend right,',"F(m_g \circ m_f) = F(m_g) \circ F(m_f)"] & F(X_Y) \arrow[r, "F(m_g)",'] & F(X_Z)
        \end{tikzcd}
    \end{center}
    By this construction, $\epsilon$ is a natural isomorphism $\id_\catt \Rightarrow FG$ (look at the above diagrams). Now, pick $Y,Z\in \Ob(\cat)$ and $f : Y \to Z$. We have $GF(Y) = X_{F(Y)}$ and $\varepsilon_Y : F(Y) \xrightarrow{\sim} F(X_{F(Y)})$. Since $F$ is fully faithful, there exists a unique $\eta_Y : Y \to X_{F(Y)} = GF(Y)$ such that $F(\eta_Y) = \varepsilon_Y$. Here, $\eta_Y = G(\epsilon_Y)$, which means that $\eta_Y$ is an isomorphism since functors preserve isomorphisms. We obtain the diagram
    \begin{center}
        \begin{tikzcd}
            Y \arrow[d,"f"] \arrow[r, "\eta_Y"] & GF(Y) \arrow[d,"GF(f)"] \\
            Z \arrow[r,"\eta_Z"] & GF(Z)
        \end{tikzcd}
    \end{center}
    The diagram commutes because $GF(f)$ is the unique morphism such that
    \[F(GF(f)) = \varepsilon_Z \circ F(f) \circ \varepsilon_Y^{-1} = F(\eta_Z \circ f \circ \eta_Y^{-1})\] and $F$ is faithful. $\eta$ is then a natural isomorphism $\id_\cat \Rightarrow GF$.
\end{proof}

\begin{example}
    $\Vectcat_k \simeq \mathbf{Mat}_k$ through the functor $n \mapsto k^n$ and $(A : n \to m) \mapsto (f_A : k^n \to k^m)$.
\end{example}
\newpage
\section{Universal properties}
References:
\begin{itemize}
    \item Riehl (Chapters II, III, IV)
    \item Mac Lane (Chapters III, IV, V)
    \item Assem (Chapters III, IV, V)
\end{itemize}

\faChevronRight \space Let $S$ be a set together with an equivalence relation $\sim$. Let $\nicefrac{S}{\sim}$ be the quotient set, and $\pi : S \to \nicefrac{S}{\sim}$ be the projection. For any $f : S \to X$ compatible with $\sim$, there exists a unique map $\bar{f} : \nicefrac{S}{\sim} \to X$ such that $f = \bar{f} \circ \pi$. This is represented by the following commutative diagram : \begin{center}\begin{tikzcd}
    S \arrow[d,"\pi",'] \arrow[r,"f"] & X \\ \nicefrac{S}{\sim} \arrow[ur, "\exists!\bar{f}", dashed,']
\end{tikzcd}\end{center}
We say that $S \xrightarrow{\pi} \nicefrac{S}{\sim}$ is a solution to the universal problem posed by the compatible maps. Such a solution is unique up to unique isomorphism: if $S \xrightarrow{p} S'$ is another solution, then we get the three commutative diagrams
\begin{center}
    \begin{tikzcd}
    S \arrow[d,"\pi",'] \arrow[r,"p"] & S' \\ \nicefrac{S}{\sim} \arrow[ur, "\exists!a", dashed,']
    \end{tikzcd}
    \begin{tikzcd}
        S \arrow[d,"p",'] \arrow[r,"\pi"] & \nicefrac{S}{\sim} \\ S' \arrow[ur, "\exists!b", dashed,']
    \end{tikzcd}
    \begin{tikzcd}
        S \arrow[d,"p",'] \arrow[r,"p"] & S' \\
        S' \arrow[r, "b",'] \arrow[ur, "\id_{S'}",'] & \nicefrac{S}{\sim} \arrow[u, "a",']
    \end{tikzcd}
\end{center}
then $abp = a\pi = p$. The identity of $S'$ also makes this diagram commute so by uniqueness $ab = \id_{S'}$ and similarly $ba = \id_{\nicefrac{S}{\sim}}$.

\subsection{Initial and final objects}
\begin{definition}
    Let $\cat$ be a category. An object $c \in \Ob(\cat)$ is \emph{initial} (\emph{final}) if for all $d \in \Ob(\cat)$ there exists a unique morphism $c \to d$ (a unique morphism $d \to c$).
\end{definition}
\begin{proposition}
    If an initial/final object exists, then it is unique up to unique isomorphism.
\end{proposition}
\begin{proof}
    Let $c,c'$ be two initial objects. Then there exists a unique morphism $f : c \to c'$ and a unique morphism $g : c' \to c$. There also exists a unique morphism $c \to c$, that is $\id_c$. Therefore, $gf = \id_c$. In the same way, $fg = \id_{c'}$. Therefore, $c$ and $c'$ are isomorphic and the isomorphism is unique.
\end{proof}
\begin{examples} \leavevmode
    \begin{enumerate}
        \item $\varnothing$ is initial in $\Set$ and any singleton is final.
        \item $\{0\}$ is both initial and final in $\Vectcat_k$ (or $R\Mod$).
        \item The category of fields does not have initial/final objects (reason on field characteristics).
    \end{enumerate}
\end{examples}

We want to say a universal object is an initial or final object. A category has at most 2, so this may seem a little restrictive, but this is solved by thinking of a good category.
\begin{definition}
    Let $F : \cat \to \Set$ be a functor. Let $\esh F$ be the category defined by
    \begin{align*}
        & \Ob(\esh F) = \{(c,x) \mid c \in \Ob(\cat) \text{ and } x \in F(c)\} \\
        & \Hom((c,x),(c',x')) = \{f \in \Hom(c,c') \mid F(f)(x) = x'\}
    \end{align*}
    where composition is composition in $\cat$, and $\id_{(c,x)} = \id_c$ for all $x$. If $F$ is contravariant, let $\esh F$ have the same objects and morphisms $\Hom((c,x),(c',x')) = \{f \in \Hom(c,c') \mid F(f)(x') = x\}$.
\end{definition}

\begin{proposition}
    There is a forgetful functor $\pi : \esh F \to \cat$ defined by $\pi(c,x) = c$ and $\pi(f : (c,x) \to (c',x')) = f : c\to c'$.
\end{proposition}

\begin{example}
    Let $S$ be a set, and $\sim$ an equivalence relation on $S$. Let $F : \Set \to \Set$ be defined by $F(X) = \{f : S \to X \mid x \sim y \Rightarrow f(x) = f(y)\}$ and $F(\alpha : X \to Y) = \alpha \circ -$. \\
    $\esh F$ has for objects $(X, S\xrightarrow{f}X)$ where $f$ is compatible with $\sim$, and for morphisms $\alpha$ that makes this diagram commute: \begin{tikzcd}
        S \arrow["f'", r] \arrow["f",d,'] & X' \\ X \arrow[ur, "\alpha",']
    \end{tikzcd} \\
    $(\nicefrac{S}{\sim}, S\xrightarrow{\pi} \nicefrac{S}{\sim})$ is an initial object of $\esh F$.
\end{example}

\begin{definition}
    Let $F : \cat \to \Set$ be a functor. A \emph{universal element} for $F$ is an initial object of $\esh F$, that is a pair $(c,x)$ with $c \in \Ob(\cat)$ and $x \in F(c)$ such that
    \[\forall (d,y), d \in \Ob(\cat), y \in F(d), \exists! \alpha : c\to d, y= F(\alpha)(x)\]
\end{definition}

\begin{definition}
    Let $F : \cat \to \catt$ be a functor and $d \in \Ob(\catt)$. A \emph{universal arrow from $d$ to $F$} is a pair $(c,f)$ where $c \in \Ob(\cat)$ and $f \in \Hom_{\catt} (d,F(c))$, such that
    \[\forall (c',f'), c' \in \Ob(\cat), f' : d \to F(c'), \exists! \alpha \in \Hom_\cat(c,c'), F(\alpha) \circ f = f'\]
    \begin{center}
        \begin{tikzcd}[column sep=tiny]
            & d \arrow[ld, "f",'] \arrow[rd, "\forall f'"] \\
            F(c) \arrow[rr, dashed, "F(\alpha)",'] & & F(c') \\
            c \arrow[rr, "\exists ! \alpha"] & & c'
        \end{tikzcd}
    \end{center}
\end{definition}

\begin{exercise}
    Define a category $d \downarrow F$ such that a universal arrow is an initial object of $d \downarrow F$.
\end{exercise}

\begin{example}
    Let $U : \Vectcat_k \to \Set$ be the forgetful functor. Let $X \in \Set$. A universal arrow from $X$ to $U$ is the ``best'' $k$-vector space $V_X$ with a map $X \to V_X$. Set $V_X = k[X]$ the $k$-vector space with basis $X$, and $i : X \to V_X$ that maps $x \in X$ to the corresponding basis element. Then, for any vector space $V$ and map $f : X \to U(V)$, $f$ can be extended by linearity into a linear map $\tilde{f} : k[X] \to V$, which makes this diagram commute:
    \begin{center}
        \begin{tikzcd}[column sep=tiny]
            & X \arrow[ld, "i",'] \arrow[rd, "f"] \\
           k[X] \arrow[rr, dashed, "\tilde{f}",'] & & U(V)
        \end{tikzcd}
    \end{center}
    If $\alpha$ is another map that makes the diagram commute then $\alpha$ and $\tilde{f}$ coincide on a basis of $k[X]$ and therefore are equal.
\end{example}

\begin{proposition}
    Universal elements and arrows are two equivalent notions.
\end{proposition}

\begin{proof}
    Let $F : \cat \to \Set$ be a functor and $(c,x)$ a universal element  for $F$. Consider $f_x : \applic{\{*\}}{F(c)}{*}{x}$. Then, $(c,f_x)$ is a universal arrow $*\to F$, because $F(\alpha)(x)=y$ iff $F(\alpha)\circ f_x = f_y$.
    \begin{center}
        \begin{tikzcd}[column sep=tiny]
            & \{*\} \arrow[ld, "f_x",'] \arrow[rd, "f_y"] \\
           F(c) \arrow[rr, dashed, "F(\alpha)",'] & & F(c')
        \end{tikzcd}
    \end{center}
    Conversely, if $F : \cat \to \catt$ is a functor and $(c,f)$ is a universal arrow $d \to F$, then consider the functor $\Hom_\catt (d,F(-)) : \applic{\cat}{\Set}{x}{\Hom_\catt (d,F(x))}$ (we need to assume $\catt$ is locally small so the functor is set-valued). Then, $f \in \Hom_\catt (d,F(c))$ is a universal element for this functor.
\end{proof}

\subsection{Representable functors}

\begin{definition}
    Let $\cat$ be a (locally small) category, and $F : \cat \to \Set$ a functor.
    \begin{enumerate}
        \item We say that $F$ is \emph{representable} if there is some $c \in \Ob(\cat)$ such that $F$ and $\Hom_\cat (c,-)$ are naturally isomorphic (if $F$ is contravariant, use $\Hom_\cat(-,c)$ instead).
        \item A \emph{representation} of $F$ is the data of $c \in \Ob(\cat)$ and a natural isomorphism $\eta : \Hom(c,-) \Rightarrow F$.
    \end{enumerate}
\end{definition}

\begin{example}
    The forgetful functor $U : \Grp \to \Set$ is representable since $\Hom_\Grp (\Z,-) \simeq U$. The natural isomorphism is given by $\alpha \in \Hom_\Grp (\Z,G) \mapsto \alpha(1) \in G$.
\end{example}

The following theorem explains how to find the natural isomorphism $\alpha : \Hom_\cat (c,-) \Rightarrow F$ in general.

\begin{theorem}[Yoneda lemma]
    Let $F : \cat \to \Set$ be a functor with $\cat$ locally small, and $c \in \Ob(\cat)$. Then,
    \[\begin{array}[t]{rcl}
        \Nat(\Hom(c,-),F) & \xrightarrow{\sim} & F(c)\\
        \alpha & \mapsto & \alpha_c(\id_c)
        \end{array}\]
    and this isomorphism is natural in $c$ and in $F$.
\end{theorem}

\begin{proof}
    Let $\alpha \in \Nat(\Hom(c,-),F)$. Let $d \in \cat$ and $f : c \to d$. By naturality, we have a commutative diagram
    \begin{center}
        \begin{tikzcd}
            \Hom(c,c) \arrow[r,"\alpha_c"] \arrow[d,"f\circ -"] & F(c) \arrow[d,"F(f)"] \\
            \Hom(c,d) \arrow[r,"\alpha_d"] & F(d)
        \end{tikzcd}
    \end{center}
    This means that $F(f) \circ \alpha_c = \alpha_d \circ (f\circ -)$. Evaluating at $\id_c$, we get $F(f) \circ \alpha_c(\id_c) = \alpha_d(f)$. This shows that the natural transformation $\alpha$ is entirely determined by the value of $\alpha_c(\id_c)$, which shows the map defined above is injective. Conversely, if $e \in F(c)$, then we define $\alpha^e : \Hom(c,-) \Rightarrow F$ by $\alpha_d^e : g \mapsto F(g)(e)$. We check it is a natural transformation:
    \begin{center}
        \begin{tikzcd}[column sep=large]
            \Hom(c,c) \arrow[r,"g \mapsto F(g)(e)"] \arrow[d,"f\circ -"] & F(c) \arrow[d,"F(f)"] \\
            \Hom(c,d) \arrow[r,"h \mapsto F(h)(e)"] & F(d)
        \end{tikzcd}
    \end{center}
    and this diagram commutes since for $g : c\to c$ we have
    \[F(f)(F(g)(e)) = F(f \circ g)(e) = F((f\circ -)(g))(e)\]
    This shows the map in the theorem is surjective, therefore an isomorphism, and its inverse is given by $e \in F(c) \mapsto \alpha^e$.
    We now check naturality. We first need to understand what it means to say the isomorphism is natural in $c$. Let $f : c \to d$. $\Nat(\Hom(c,-),F)$ is functorial in $c$, as it is the composition of two contravariant hom-functors. More concretely:
    \[c \xrightarrow{f} d \rightsquigarrow \Hom(d,-) \xrightarrow{- \circ f}\Hom(c,-) \rightsquigarrow \Nat(\Hom(c,-),F) \xrightarrow{- \circ (- \circ f)} \Nat(\Hom(d,-),F)\]
    ($\Nat$ is the hom-functor of the functor category $\cat^\Set$). One thing to note is that the morphism $f : c\to d$ induces a natural transformation $\Hom(d,-) \xrightarrow{-\circ f} \Hom(c,-)$, and this makes the whole thing work. This is in general a property of functors defined on a product category, see the remark below. Now, saying the isomorphism, which we'll write $\Phi_{d,F}$, is natural means that the square
    \begin{center}
        \begin{tikzcd}
            \Nat(\Hom(c,-),F) \arrow[r,"\Phi_{c,F}"] \arrow[d,"-\circ(-\circ f)"] & F(c) \arrow[d,"F(f)"]\\
            \Nat(\Hom(d,-),F) \arrow[r,"\Phi_{d,F}"] & F(d)
        \end{tikzcd}
    \end{center}
    commutes. And indeed, if $\alpha : \Hom(c,-)\Rightarrow F$ is a natural transformation,
    \begin{align*}
        \Phi_{d,F}(\alpha \circ (- \circ f)) & = (\alpha \circ (-\circ f))_d (\id_d) = [\alpha_d \circ (- \circ f)] (\id_d) = \alpha_d (f) \\
        F(f)(\Phi_{c,F}(\alpha)) & = F(f)(\alpha_c(\id_c)) = \alpha_d(f\circ \id_c) = \alpha_d(f)
    \end{align*}
    The second to last equality comes from the naturality of $\alpha$. \\
    We now turn to naturality in $F$. Let $G$ be another functor $\cat \to \Set$ and $\beta : F \Rightarrow G$ be a natural transformation. We check that
    \begin{center}
        \begin{tikzcd}
            \Nat(\Hom(c,-),F) \arrow[r,"\Phi_{c,F}"] \arrow[d,"\beta \circ -"] & F(c) \arrow[d, "\beta_c"] \\
            \Nat(\Hom(c,-),G) \arrow[r,"\Phi_{c,G}"] & G(c)
        \end{tikzcd}
    \end{center}
    commutes. For $\alpha : \Hom(c,-) \Rightarrow F$, we have
    \[\beta_c (\Phi_{c,F}(\alpha)) = \beta_c(\alpha_c(\id_c)) = (\beta \circ \alpha)_c (\id_c) = \Phi_{c,G}(\beta \circ \alpha)\]
    which completes the proof of naturality.
\end{proof}
\newpage

\begin{remark} \leavevmode
    \begin{enumerate}
        \item If $F : \cat \to \Set$, then $(c,x)$ is a universal element for $F$ if and only if the natural transformation $\alpha_x : \Hom(c,-) \Rightarrow F$ induced by $x$ is an isomorphism. Indeed, $\alpha_x$ is an isomorphism iff $\forall c' \in \cat$, $(\alpha_x)_{c'} : \applic{\Hom(c,c')}{F(c')}{f}{F(f)(x)}$ is bijective iff
        \[\forall c' \in \cat, \forall y \in F(c'), \exists ! f : c \to c', F(f)(x) = y\]
        \item For universal arrows, use $\Hom_\catt (d,F(-))$ as before.
        \item Let $\cat,\catt$ and $\mathcal{E}$ be categories, and $F : \cat \times \catt \to \mathcal{E}$ be a functor. Let $c,d \in \Ob(\cat)$, $x,y \in \Ob(\catt)$ and morphisms $f : c \to d$, $g : x\to y$. The morphism $f$ induces a natural transformation $F(f,\id_-) : F(c,-) \Rightarrow F(d,-)$, see the commutative square:
        \begin{center}
            \begin{tikzcd}[column sep=large]
                F(c,x) \ar{r}{F(f,\id_x)} \ar{d}{F(\id_c,g)} & F(d,x) \ar{d}{F(\id_d,g)} \\
                F(c,y) \ar{r}[']{F(f,\id_y)} & F(d,y)
            \end{tikzcd}
        \end{center}
    \end{enumerate}
\end{remark}

\subsection{Examples of objects defined by universal properties}

\subsubsection{Products, coproducts}
Let $\cat$ be a small category and $X,Y \in \Ob(\cat)$. We define a category $\cat_{X,Y}$ whose objects are tuples $(Z,f,g)$ where $Z \in \Ob(\cat)$ and $f : Z \to X$, $g : Z \to Y$ and morphisms are maps $\alpha : Z \to Z'$ in $\cat$ such that the following diagram commutes:
\begin{center}
    \begin{tikzcd}[column sep=tiny, row sep=small]
        & Z \arrow[dl,"f",'] \arrow[dd,"\alpha"] \arrow[dr,"g"] \\
        X & & Y \\
        & Z' \arrow[ul,"f'"] \arrow[ur,"g'",']
    \end{tikzcd}
\end{center}

\begin{definition}
    A \emph{product} of $X$ and $Y$ is a final object in $\cat_{X,Y}$. Concretely, it is an object $X \times Y$ together with two maps $\pi_X : X \times Y \to X$ and $\pi_Y : X \times Y \to Y$ such that for any $(Z,f,g) \in \Ob(\cat_{X,Y})$, we have a commutative diagram
    \begin{center}
        \begin{tikzcd}[column sep=scriptsize]
            & Z \arrow[dl,"\forall f",'] \arrow[dr,"\forall g"] \arrow[d,"\exists!\alpha", dashed] \\
            X & X \times Y \arrow[l,"\pi_X"] \arrow[r,"\pi_Y",'] & Y
        \end{tikzcd}
    \end{center}
\end{definition}

Since it is defined as being a final object, if it exists, a product is unique up to unique isomorphism.

\begin{examples}
    In $\Set$, the product of $X$ and $Y$ is the cartesian product. In $\Grp$, it is the product group. In $\Top$, it is the cartesian product equipped with the product topology. In these examples, the maps in the definition are the canonical projections.
\end{examples}

The notion dual to the one of a product is called a coproduct.

\begin{definition}
    A \emph{coproduct} of $X$ and $Y$ is a product in $\cat^\op$. Concretely, it satisfies the universal property expressed by this commutative diagram:
    \begin{center}
        \begin{tikzcd}
            X \arrow[r,"i_X"] \arrow[dr, "\forall f",'] & X \sqcup Y \arrow[d,"\exists!\alpha",dashed] & Y \arrow[dl,"\forall g"] \arrow[l,"i_Y",'] \\
            & Z
        \end{tikzcd}
    \end{center}
\end{definition}

\begin{examples}
    In $\Set$, the coproduct of $X$ and $Y$ is the disjoint union together with canonical inclusion. In $\Top$, the coproduct of $X$ and $Y$ is their disjoint union equipped with the disjoint union topology. However, in $\Grp$, the underlying set of the coproduct of two groups is not the disjoint union.
\end{examples}

\subsubsection{Equalizers and coequalizers}

\begin{definition}
    Let $\cat$ be a category and $X,Y \in \Ob(\cat)$, $f,g : X \to Y$. Consider the contravariant functor $F : \cat \to \Set$ defined by $F(c) = \{\alpha : c \to X \mid f\alpha = g \alpha\}$ and $F(\beta) = - \circ \beta$. An \emph{equalizer} in $\cat$ is a representation of the contravariant functor $F$.
\end{definition}

By the Yoneda lemma, a natural transformation $\Hom(-,c) \Rightarrow F$ is the same as an element of $F(c)$, so a representation of $F$ is a pair $(c,e)$ with $c \in \Ob(\cat)$ and $e \in F(c)$ such that the natural transformation given by the Yoneda lemma is an isomorphism. Concretely, we want $\eta_e : \applic{\Hom(d,c)}{F(d)}{h}{F(h)(e)}$ to be an isomorphism for all $d \in \Ob(c)$. This translates into the follwing diagram:
\begin{center}
    \begin{tikzcd}
        & d \arrow[dl, "\exists!\alpha",dashed,'] \arrow[d,"\forall h"] \\
        c \arrow[r,"e"] & X \arrow[r,"f",shift left] \arrow[r,"g",shift right,'] & Y
    \end{tikzcd}
\end{center}

\begin{example}
    In $\Set$, $E = \{x \in X \mid f(x) = g(x)\} \hookrightarrow X$ is an equalizer.
\end{example}

The dual notion is that of a coequalizer.

\begin{definition}
    A \emph{coequalizer} of \begin{tikzcd}
        X \arrow[r,"f",shift left] \arrow[r,"g",shift right,'] & Y
    \end{tikzcd} is an object $Z \in \Ob(\cat)$ together with a morphism $\pi : Y\to Z$ such that $\pi f = \pi g$ and that universal to this property:
    \begin{center}
        \begin{tikzcd}
            X \arrow[r,"f",shift left] \arrow[r,"g",shift right,'] & Y \arrow[r, "\pi"] \arrow[d, "\forall h"] & Z \arrow[dl, dashed, "\exists! \alpha"] \\
            & Z'
        \end{tikzcd}
    \end{center}
\end{definition}

\begin{example}
    In $\Set$, consider the equivalence relation $\sim$ on $Y$ generated by $f(x)\sim g(x)$ (the smallest equivalence relation on $Y$ with this property). Then $y \xrightarrow{\pi} \nicefrac{Y}{\sim}$ is a coequalizer.
\end{example}

\subsection{Adjoint functors}

This notion was introduced by Kan in 1958.

\begin{definition}
    An \emph{adjunction} $(G,D)$ is a pair of functors $G : \cat \to \catt$ and $D : \catt \to \cat$ together with an isomorphism $\Hom_\catt (G(c),d) \simeq \Hom_\cat (c,D(d))$ which is natural in both $c$ and $d$. \\
    We write $G \dashv D$ and say $G$ is left adjoint to $D$ and $D$ is right adjoint to $G$.
\end{definition}

If $G \dashv D$ we have $\forall c,d \in \Ob(\cat)\times \Ob(\catt)$,
\[\Hom_\catt (G(c),d) \xrightarrow[\alpha_{c,d}]{\sim} \Hom_\cat (c,D(d))\]
and in particular when $d=G(c)$ we get $\Hom_\catt (G(c),G(c)) \xrightarrow[\alpha_{c,G(c)}]{\sim} \Hom_\cat (c,DG(c))$. \\
Let $\eta_c : c \to DG(c)$ be the image of $\id_{G(c)}$. This gives a collection of morphisms $- \to DG(-)$.
\begin{proposition}
    These morphisms make up a natural transformation $\id_\cat \Rightarrow DG$.
\end{proposition}
\begin{proof}
    Let $f : c\to d$. We want to show that
    \begin{center}
        \begin{tikzcd}[column sep=large]
            c \arrow[d,"f"] \arrow[rr,"\eta_c = \alpha_{c,G(c)} (\id_{G(c)})"] & & DG(c) \arrow[d,"DG(f)"] \\
            d \arrow[rr, "\eta_d = \alpha_{d,G(d)} (\id_{G(d)})"] & & DG(d)
        \end{tikzcd}
    \end{center}
    commutes. By naturality of the isomorphism $\alpha$ given by the adjunction, we get the following commutative diagram
    \begin{center}
        \begin{tikzcd}
            \Hom(G(c),G(c)) \arrow[d, "G(f) \circ -",'] \arrow[r,"\sim","\alpha_{c,G(c)}"'] & \Hom(c,DG(c)) \arrow[d,"DG(f)\circ -",']\\  
            \Hom(G(c),G(d)) \arrow[r,"\sim","\alpha_{c,G(d)}"'] & \Hom(c,DG(d)) \\
            \Hom(G(d),G(d)) \arrow[u, "- \circ G(f)"] \arrow[r,"\sim","\alpha_{d,G(d)}"'] & \Hom(d,DG(d)) \arrow[u,"- \circ f"]
        \end{tikzcd}
    \end{center}
    which gives us these equations:
    \begin{align*}
        DG(f) \circ \eta_c & = DG(f) \circ \alpha_{c,G(c)}(\id_{G(c)}) = \alpha_{c,G(d)}(G(f)\circ \id_{G(c)}) = \alpha_{c,G(d)} (G(f)) \\
        \eta_d \circ f & = \alpha_{d,G(d)}(\id_{G(d)}) \circ f = \alpha_{c,G(d)}(\id_{G(c)} \circ G(f)) = \alpha_{c,G(d)} (G(f))
    \end{align*}
    which completes the proof.
\end{proof}

We also get a natural transformation $\epsilon : GD \Rightarrow \id_\catt$ when $c=D(d)$ by setting $\epsilon_d = \alpha_{D(d),d}^{-1}(\id_{D(d)})$.

\begin{definition}
    The natural transformation $\eta : \id_\cat \Rightarrow DG$ is called the \emph{unit} of the adjunction. The natural transformation $\epsilon : GD \Rightarrow \id_\catt$ is called its $\emph{counit}$.
\end{definition}

\begin{proposition}
    Let \begin{tikzcd}
        \cat \arrow[r, bend left, "G"] & \catt \arrow[l,bend left,"D"]
    \end{tikzcd} be two functors. Then, $G \dashv D$ if and only if there are natural transformations $\eta : \id_\cat \Rightarrow DG$ and $\epsilon : GD \Rightarrow \id_\catt$ such that the following diagrams commute:
    \begin{center}
        \begin{tikzcd}
            G \arrow[r, "G\eta", Rightarrow] \arrow[dr, "\id_G", equal,'] & GDG \arrow[d, "\epsilon G", Rightarrow] & & D \arrow[r,"\eta D",Rightarrow] \arrow[dr, "\id_D",equal,'] & DGD \arrow[d, "D \epsilon", Rightarrow] \\
            & G & & & D
        \end{tikzcd}
    \end{center}
    where $G\eta$ is the natural transformation given by the morphisms $G(\eta_c)$ and $\epsilon G$ is the one give by morphisms $\epsilon_{G(c)}$ (and similarly for $\eta D$ and $D\epsilon$).
\end{proposition}

\begin{proof}
    Suppose $G \dashv D$. Let $\eta : \id_\cat \Rightarrow DG$ and $\epsilon : GD \Rightarrow \id_\catt$ be the unit and counit of the adjunction. Let $c \in \cat$. We have
    \[(\epsilon G)_c \circ (G\eta)_c = \varepsilon_{G(c)} \circ G(\eta_c) = \alpha_{DG(c),G(c)}^{-1} (\id_{DG(c)}) \circ G(\alpha_{c,G(c)}(\id_{G(c)}))\]
    and the naturality of $\alpha$ gives the following commutative diagram
    \begin{center}
        \begin{tikzcd}[column sep=huge]
            \Hom(G(c),G(c))
            &
            \Hom(c,DG(c))
                \arrow[l,"\sim"',"\alpha_{c,G(c)}^{-1}"]
            \\

            \Hom(GDG(c), G(c))
                \arrow[u, "- \circ G(\alpha_{c,G(c)}(\id_{G(c)}))"]
            &
            \Hom(DG(c),DG(c))
                \arrow[u,"- \circ \alpha_{c,G(c)}(\id_{G(c)})"']
                \arrow[l,"\sim"',"\alpha_{DG(c),G(c)}^{-1}"]
        \end{tikzcd}
    \end{center}
    which shows that $(\epsilon G)_c \circ (G\eta)_c = \id_{G(c)}$, hence $\epsilon G \circ G\eta = \id_G$. The commutativity of the other triangle is treated in a similar way. \\
    Now assume that there are natural transformations $\eta$ and $\epsilon$ that make both triangles commute. \\
    We define two maps
    \begin{align*}
        \alpha_{c,d} & : \applic{\Hom(G(c),d)}{\Hom(c,D(d))}{f}{D(f)\circ \eta_c} \\
        \beta_{c,d} & : \applic{\Hom(c,D(d))}{\Hom(G(c),d)}{g}{\epsilon_d \circ G(g)}
    \end{align*}
    and we show these are natural isomorphisms that give us the adjunction. First we check naturality of $\alpha$. Let $f : c \to c' \in \Mor(\cat)$ and $g : d\to d' \in \Mor(\catt)$. We need to check that the diagrams
    \begin{center}
        \begin{tikzcd}
            \Hom_\catt (G(c),d)
                \arrow[r, "\alpha_{c,d}"]
            &
            \Hom_\cat (c,D(d))
            \\
            \Hom_\catt (G(c'),d)
                \arrow[u, "- \circ G(f)"]
                \arrow[r,"\alpha_{c',d}"]
            &
            \Hom_\cat(c',D(d))
                \arrow[u,"-\circ f"]
        \end{tikzcd}
        \hspace{1cm}
        \begin{tikzcd}
            \Hom_\catt (G(c),d)
                \arrow[r, "\alpha_{c,d}"]
                \arrow[d, "g \circ -"]
            &
            \Hom_\cat (c,D(d))
                \arrow[d, "D(g) \circ -"]
            \\
            \Hom_\catt (G(c),d')
                \arrow[r,"\alpha_{c,d'}"]
            &
            \Hom_\cat(c,D(d'))
        \end{tikzcd}
    \end{center}
    commute. We only check the left diagram and leave the right to the reader (sorry). We have
    \begin{align*}
        \alpha_{c,d} \circ (- \circ G(f)) & = (D(-) \circ \eta_c) \circ (- \circ G(f)) = D(-\circ G(f)) \circ \eta_c = D(-) \circ DG(f) \circ \eta_c \\
        (-\circ f) \circ \alpha_{c',d} & = (-\circ f) \circ (D(-)\circ \eta_{c'}) = D(-) \circ \eta_{c'} \circ f = D(-) \circ DG(f) \circ \eta_c
    \end{align*}
    One shows $\beta$ is natural in $c$ and $d$ in a similar way. We leave it to the reader (sorry again). Now we need to check that $\alpha$ and $\beta$ are inverses of each other, and that's where the triangle diagrams come into play.
    \[\alpha_{c,d} \circ \beta_{c,d} = D(\epsilon_d \circ G(-)) \circ \eta_c = D(\varepsilon_d) \circ DG(-) \circ \eta_c = D(\varepsilon_d) \circ \eta_{D(d)} \circ - = -\]
    We used the definitions of $\alpha$ and $\beta$, the functoriality of $D$, the naturality of $\eta$ and the second triangle diagram. We leave to the reader (sorry) to check that $\beta_{c,d} \circ \alpha_{c,d}$ is also the identity.
\end{proof}

\begin{examples} \leavevmode
    \begin{enumerate} 
        \item The forgetful functor $\Ab \to \Set$ is right adjoint to the free abelian group functor $\Set \to \Ab$.
        \item The forgetful functor $\Ab \to \Grp$ is right adjoint to the abelianization functor $\Grp \to \Ab$ that sends a group $G$ to its abelianization $G^{ab} = G/[G,G]$ and a morphism $f : G \to H$ to the induced morphism $f^{ab} : G^{ab} \to H^{ab}$.
        \item The forgetful functor $\Top \to \Set$ is right adjoint to the functor $\Set \to \Top$ that takes a set and equips it with the coarse topology. The forgetful functor $\Top \to \Set$ is also left adjoint to the functor $\Set \to \Top$ that equips a set with the discrete topology.
        \item Let $G$ be a group, $H$ one of its subgroups and $k$ be a field. We have a functor from the category $\Rep_k(G)$ of representations of $G$ on $k$-vector spaces to the category $\Rep_k(H)$ of representations of $H$ on $k$-vector spaces. It is the restriction functor $\mathrm{Res}_H^G$. Its left adjoint is $\mathrm{Ind}_H^G$, the induced representation functor.
    \end{enumerate}
\end{examples}

\begin{theorem} \label{thmadjoints}
    Let $F : \cat \to \catt$ be a functor. The following are equivalent:
    \begin{enumerate}
        \item $F$ admits a left adjoint
        \item For all $X \in \Ob(\catt)$, $\Hom_\catt (X,F(-))$ is representable
        \item For all $X \in \Ob(\catt)$, there exists a universal arrow $X \to F$
    \end{enumerate}
\end{theorem}

\begin{corollary}
    If they exist, adjoints are unique up to isomorphism.
\end{corollary}

\begin{proof}
    $2 \iff 3$ was the subject of a previous remark right after the Yoneda lemma. We prove $1 \iff 2$. Suppose $F$ admits a left adjoint $G$. Let $X \in \Ob(\catt)$. Then for all $Y \in \Ob(\cat)$ we have a bijection $\Hom_\catt(X,F(Y)) \simeq \Hom_\cat(G(X),Y)$ which is natural in $Y$, so $G(X)$ represents $\Hom_\catt(X,F(-))$. For the converse, suppose all functors $\Hom_\catt(X,F(-))$ are representable. We define $G(X)$ to be an object of $\cat$ that represents $\Hom_\catt(X,F(-))$. Now choose $X,Y \in \Ob(\catt)$ and $f : X \to Y$. We need to define $G(f)$. We wish to have a commuting square
    \begin{center}
        \begin{tikzcd}
            \Hom(G(X),-)
                \arrow[r, "\sim"]
            &
            \Hom(X,F(-))
            \\
            \Hom(G(Y),-)
                \arrow[r,"\sim"]
                \arrow[u,"\exists! \gamma", dashed]
            &
            \Hom(Y,F(-))
                \arrow[u,"- \circ f"]
        \end{tikzcd}
    \end{center}
    We need to recover a map $G(X) \to G(Y)$ such that composing with it gives us $\gamma$. This works by the Yoneda lemma, which tells us that the natural transformation $\gamma$ comes from an element $\Hom(G(X),G(Y))$. Call it $G(f)$. It remains to check this does define a functor. Using this diagram with $X=Y$ and $f = \id_X$ shows that $G(\id_X)= \id_{G(X)}$. Let $X \xrightarrow{f} Y \xrightarrow{g} Z$ in $\cat$. Then we draw
    \begin{center}
        \begin{tikzcd}
            \Hom(G(Z),-)
                \arrow[r,"- \circ G(g)" ']
                \arrow[rr,bend left=10,"- \circ G(g\circ f)"]
                \arrow[d,"\sim" sloped]
            &
            \Hom(G(Y),-)
                \arrow[r,"- \circ G(f)" ']
                \arrow[d,"\sim" sloped]
            &
            \Hom(G(X),-)
                \arrow[d,"\sim" sloped]
            \\
            \Hom(Z,F(-))
                \arrow[r,"- \circ g"]
                \arrow[rr,bend right=10,"- \circ (g \circ f)",',]
            &
            \Hom(Y,F(-))
                \arrow[r,"- \circ f"]
            &
            \Hom(X,F(-))
        \end{tikzcd}
    \end{center}
    and this diagram shows that $G(g\circ f) = G(g) \circ G(f)$ (because the map $\gamma$ above is unique).
\end{proof}

This theorem shows there is a deep link between universal properties and adjoint functors.

\subsection{Limits and colimits}
(This subsection may be skipped on a first reading.) \\
Let us recall the definition of a functor category.
\begin{definition}
    Let $\cat,\catt$ be two categories. Then $\Fun(\cat,\catt)$, also written $\catt^\cat$, is the category whose objects are functors $\cat \to \catt$ and morphisms are natural transformations between such functors, with composition given by vertical composition. It is called the \emph{functor category category from $\cat$ to $\catt$}. When $\Jcat$ is a small category we also say that $\Fun(\cat,\catt)$ is the category of \emph{diagrams of shape $\Jcat$ in $\cat$}.
\end{definition}

\begin{examples} \leavevmode
    \begin{enumerate}
        \item Let $\mathbf{2}$ be the category \begin{tikzcd}
            \bullet \arrow[r] & \bullet
        \end{tikzcd} which has two objects $1$ and $2$ and three morphisms (two of them being identities). \\
        Then $\mathbf{2\times 2}$ is the category \begin{tikzcd}
            \bullet
                \arrow[r] \arrow[d] \arrow[rd]
            &
            \bullet
                \arrow[d]
            \\
            \bullet
                \arrow[r]
            &
            \bullet
        \end{tikzcd} which has 4 objects and 9 morphisms (4 of them being identities). Then, a functor from  $\mathbf{2 \times 2}$ to $\cat$ is a commutative diagram of this shape in $\cat$.
        \item If $\Jcat$ is a small category, there is a functor $\Delta : \Ob(\cat) \to \Fun(\Jcat,\cat)$ where $\Delta(c)$ is the constant functor at $c$, that is the functor that sends all objects to $c$ and all morphisms to $\id_c$, and $\Delta(f) = f$, which works since a natural transformation $\Delta(c) \Rightarrow \Delta(d)$ is just the data of one morphism $c\to d$.
    \end{enumerate}
\end{examples}

\begin{definition}
    A \emph{cone above a diagram $F : \Jcat \to \cat$ with summit $c\in \cat$} is a natural transformation $\lambda : \Delta(c) \Rightarrow F$. Dually, a cone \emph{under} $F$ with summit $c$, also called a \emph{cocone}, is a natural transformation $\lambda : F \Rightarrow \Delta(c)$.
\end{definition}

Let us unwrap this definition. A cone is a collection of maps $\lambda_j : c \to F(j)$ for all $j \in \Ob(\Jcat)$, such that for any morphism $f : i \to j \in \Mor(\Jcat)$, this diagram commutes:
\begin{center}
    \begin{tikzcd}[column sep=tiny]
    &
    c
        \arrow[dl,"\lambda_i" '] \arrow[dr,"\lambda_j"]
    \\
    F(i)
        \arrow[rr, "F(f)" ']
    & &
    F(j)
    \end{tikzcd}
\end{center}

\begin{definition}
    Let $F : \Jcat \to \cat$ be a diagram. A \emph{limit} (or \emph{projective limit} or \emph{inverse limit}) of $F$ is a universal cone above $F$, in the sense that it is a final object in the category of cones above $F$. Dually, a \emph{colimit} (or \emph{inductive limite} or \emph{direct limit}) is a universal cocone, that is an initial object in the category of cones under $F$.
\end{definition}

Concretely, a limit of $F : \Jcat \to \cat$ is a pair $(\lim F, \phi)$ with $\lim F \in \Ob(\cat)$ and $\phi : \Delta(\lim F) \Rightarrow F$ is such that for any cone $\lambda : \Delta(c) \Rightarrow F$, there exists a unique morphism $f : X \to \lim F \in \Mor(\cat)$, such that the diagram on the left commutes:
\begin{center}
    \begin{tikzcd}[column sep=tiny]
        \Delta(c)
            \arrow[rr, "\Delta(f)",dashed]
            \arrow[dr, "\lambda" ', Rightarrow]
        &&
        \Delta(\lim F)
            \arrow[dl, "\phi", Rightarrow]
        \\
        &
        F
    \end{tikzcd}
    \hspace{1cm}
    which is equivalent to
    \hspace{1cm}
    $\forall j \in \Jcat$,
    \begin{tikzcd}[column sep=tiny]
        c
            \arrow[rr, "f",dashed]
            \arrow[dr, "\lambda_j" ', Rightarrow]
        &&
        \lim F
            \arrow[dl, "\phi_j", Rightarrow]
        \\
        &
        F(j)
    \end{tikzcd}
\end{center}

In compact form, $\Hom_\cat(-, \lim F) \simeq \Hom_{\Fun(\Jcat,\cat)} (\Delta(-),F)$.

\begin{exercise}
    Do the same for colimits.
\end{exercise}

\begin{remark}\leavevmode
    \begin{enumerate}
        \item If a limit exists it is unique up to isomorphism (unique isomorphism that commutes with the legs of the cone)
        \item If all limits exist, then $\lim$ becomes a functor $\lim : \Fun(\Jcat, \cat) \to \cat$ in the following way. Recall that theorem \ref{thmadjoints} says a functor $D$ admits a left adjoint iff for all objects $X$ in its codomain, $\Hom(X,D(-))$ is representable. The compact form of the definition of a limit says that the functor $\Hom(\Delta(-),F)$ is representable for all $F$ (since we assume all limits exist). A dual version of the theorem gives that $\Delta$ admits a right adjoint, which is $\lim$ since $\Hom(c,\lim F) \simeq \Hom(\Delta(c),F)$. If $\eta : F \Rightarrow G$ is a natural transformation, then $\lim(\eta)$ can be constructed in the following way: $\lim F \Rightarrow F \underset{\eta}{\Rightarrow} G$ is a cone above $G$, and $\lim(\eta) : \lim F \to \lim G$ comes from the universality of $\lim G$.
    \end{enumerate}
\end{remark}

\begin{corollary} \leavevmode
    \begin{enumerate}
        \item If $\cat$ has all $\Jcat$-limits, then $\lim : \Fun(\Jcat,\cat) \to \cat$ is a right adjoint to $\Delta$.
        \item If $\cat$ has all $\Jcat$-colimits, then $\colim : \Fun(\Jcat,\cat) \to \cat$ is a left adjoint to $\Delta$.
    \end{enumerate}
\end{corollary}

\begin{example} \leavevmode
    \begin{enumerate}
        \item If $\Jcat$ is discrete, that is has no morphisms other than identities, then a functor $F : \Jcat \to \cat$ is the same as a collection $(X_i)_{i \in \Jcat}$ of objects of $\cat$. Then, a limit of $F$ is an object $\lim F \in \Ob(\cat)$ with morphisms $f_i : \lim F \to X_i$ such that for all objects $X \in \Ob(\cat)$ with morphisms $p_i : X \to X_i$, we have a unique map $\alpha : X \to \lim F$ that makes this diagram commute for all $i,j \in \Jcat$:
        \begin{center}
            \begin{tikzcd}
                &
                X
                    \arrow[dl,"p_i" ']
                    \arrow[d,"\alpha",dashed]
                    \arrow[dr,"p_j"]
                \\
                X_i
                &
                \lim F
                    \arrow[l,"f_i"]
                    \arrow[r,"f_j" ']
                &
                X_j
            \end{tikzcd}
        \end{center}
        We write $\lim F = \prod\limits_{j \in \Jcat} F(j)$ and call it the \emph{product of the $F(j)$s}. Morphisms $f_i$ are written $\pi_i$ and called \emph{canonical projections}. \\
        Dually, the colimit of $F$ is called a coproduct and written $\bigsqcup\limits_{j \in \Jcat} F(j)$.
        \item If $\Jcat =$ \begin{tikzcd}[column sep=small]
            \bullet \arrow[r,shift left] \arrow[r, shift right] & \bullet
        \end{tikzcd}, then a functor $F : \Jcat \to \cat$ is the data of two parallel morphisms in $\cat$. A limit is an equalizer and a colimit is a coequalizer.
        \item If $\Jcat =$ \begin{tikzcd}[column sep=small,row sep=scriptsize]
            & \bullet \arrow[d] \\ \bullet \arrow[r] & \bullet
        \end{tikzcd} then $F : \Jcat \to \cat$ is the data of $A,B,C \in \Ob(\cat)$ with two morphisms $f : A \to C$ and $g : B \to C$. The limit $\lim F$ is called a \emph{pullback} of $f$ and $g$, with universal property depicted here:
        \begin{center}
        \begin{tikzcd}
            X
                \arrow[rrd,bend left]
                \arrow[ddr,bend right]
                \arrow[dr,dashed,"\exists !"]
            \\
            &
            A \times_C B
                \arrow[d,"\pi_B" ']
                \arrow[r,"\pi_A"]
            &
            A
                \arrow[d,"f"]
            \\
            &
            B
                \arrow[r,"g" ']
            &
            C
        \end{tikzcd}
    \end{center}
    \item If $\Jcat = \omega^\op$, that is $\Jcat = \cdots \to 2 \to 1 \to 0$, then $\lim F$ is often called the ``inverse limit'' of $F$. Concretely, $F$ is the data of $\cdots \to F(2) \xrightarrow[\alpha_2]{} F(1) \xrightarrow[\alpha_1]{} F(0)$, and a cone above $F$ looks like
    \begin{center}
        \begin{tikzcd}
            & & c
                \arrow[dl,"\lambda_2" ']
                \arrow[d,"\lambda_1"]
                \arrow[dr,"\lambda_0"]
            \\
            \cdots
                \arrow[r]
            &
            F(2)
                \arrow[r,"\alpha_2" ']
            &
            F(1)
                \arrow[r,"\alpha_1" ']
            &
            F(0)
        \end{tikzcd}
        \hspace{2em}
        we have $(\alpha_i \circ \cdots \circ \alpha_n) \circ \lambda_n = \lambda_i$.
    \end{center}
    The typical example of an inverse limit is the one given by $F(n) = \nicefrac{\Z}{p^n\Z}$ in $\Ring$ with morphisms $\nicefrac{\Z}{p^{n+1}\Z} \to \nicefrac{\Z}{p^n\Z}$ being reduction mod $p^n$. The inverse limit $\invlim \nicefrac{\Z}{p^n\Z}$ is the ring of $p$-adic integers. Concretely, $a \in \invlim \nicefrac{\Z}{p^n\Z}$ iff $a = (a_i)_{i\in \N}$ such that $a_i \equiv a_j \mod p^i \forall i \le j$.
    \item The dual notion, given by $\Jcat = 0 \to 1 \to 2 \to \cdots$, is obtained by taking the colimit. It is called a \emph{direct limit}. The typical example here is the Pr√ºfer $p$-group $\dirlim \nicefrac{\Z}{p^n \Z} = \Z(p^\infty)$.
    \end{enumerate}
\end{example}

\begin{definition}
    Let $\cat$ be a category. We say $\cat$ is \emph{(co)complete} if it has all small (co)limits i.e. if for all diagrams $F : \Jcat \to \cat$ with $\Jcat$ small, $F$ has a (co)limit.
\end{definition}

\begin{theorem}
    A category $\cat$ is (co)complete if and only if it has all small (co)products and (co)equalizers.
\end{theorem}

\begin{proof}
    Let $\Jcat$ be a small category and $D : \Jcat \to \cat$ be a diagram. We have the products $\prod\limits_{k \in \Ob(\Jcat)} D(k)$ and $\prod\limits_{g \in \Mor(\Jcat)} D(\cod(g))$ where $\cod(g)$ is the codomain of $g$. We have two morphisms
    \begin{center}
        \begin{tikzcd}
            \prod\limits_{k \in \Ob(\Jcat)} D(k)
                \arrow[r,shift left, "s"]
                \arrow[r,shift right, "t" ']
            & \prod\limits_{g \in \Mor(\Jcat)} D(\cod(g))
        \end{tikzcd}
    \end{center}
    given by $s = \prod_{f : i \to j} D(f)\pi_i$ and $t = \prod_{f : i \to j} \pi_j$, or with diagrams, for any $f : i \to j \in \Mor(\Jcat)$ :
    \begin{center}
        \begin{tikzcd}
            \prod\limits_{k \in \Ob(\Jcat)} D(k)
                \arrow[d, "\pi_i"]
                \arrow[r, "\exists! s", dashed]
            &
            \prod\limits_{g \in \Mor(\Jcat)} D(\cod(g))
                \arrow[d,"\pi_f"]
            \\
            D(i)
                \arrow[r,"D(f)"]
            & D(j)
        \end{tikzcd}
        \hspace{1cm}
        \begin{tikzcd}[column sep=tiny]
            \prod\limits_{k \in \Ob(\Jcat)} D(k)
                \arrow[dr, "\pi_j" ']
                \arrow[rr, "\exists! t", dashed]
            & &
            \prod\limits_{g \in \Mor(\Jcat)} D(\cod(g))
                \arrow[dl,"\pi_f"]
            \\
            & D(j)
        \end{tikzcd}
    \end{center}
    We call $\lim D$ an equalizer of $s$ and $t$. A cone above $D$ is given by compositions \[\lim D \xrightarrow{\alpha} \prod\limits_{k \in \Ob(\Jcat)} D(k)\xrightarrow{\pi_i} D(i)\]
    Indeed, for any morphism $f: i \to j \in \Mor(\Jcat)$, $D(f)\pi_i\alpha = \pi_f s \alpha = \pi_f t \alpha = \pi_j \alpha$. \\
    Now let $\Delta(c) \underset{\lambda}{\Rightarrow} D$ be another cone above $D$. For any $k \in \Ob(\Jcat)$, we have $\lambda_k : c \to D(k)$, which gives a unique morphism $\lambda_* : c \to \prod\limits_{k \in \Ob(\Jcat)} D(k)$ such that $\pi_i \lambda_* = \lambda_i$. Then, for any $f : i \to j \in \Mor(\Jcat)$, we have
    \begin{align*}
        \pi_f s \lambda_* & = D(f)\pi_i \lambda_* = D(f)\lambda_i = \lambda_j \\
        \pi_f t \lambda_* & = \pi_j \lambda_* = \lambda_j
    \end{align*} 
    and applying the universal property of the product shows that $s \lambda_* = t \lambda_*$. By the universal property of equalizers this gives the existence of a unique morphism $c \to \lim D$ and completes the proof.
\end{proof}

\begin{definition}
    $F : \cat \to \catt$ \emph{preserves (co)limits} if for every diagram $D : \Jcat \to \cat$ and any (co)limit cone $(c,\phi)$ of $D$, the image $(F(c),F\phi)$ is a (co)limit cone over $FD : \Jcat \to \catt$.
\end{definition}

\begin{remark}
    Preserving limits is like having $F(\lim D) \simeq \lim FD$, but stronger:
    \begin{center}
        \begin{tikzcd}
            \lim D \arrow[d,"\phi_i"] \\ D(i)
        \end{tikzcd}
        \hspace{2em}$\rightsquigarrow$\hspace{2em}
        \begin{tikzcd}
            F(\lim D) \arrow[r,"\exists! \alpha",dashed] \arrow[d,"FD(\phi_i)" '] & \lim FD \arrow[dl,"\lambda_i"] \\ FD(i) 
        \end{tikzcd}
    \end{center}
    and $\alpha$ is an isomorphism since $(F(\lim D), F\phi)$ is a limit cone.
\end{remark}

\begin{proposition}
    Let $\cat$ be a locally small category and $X \in \Ob(\cat)$. Then
    \begin{enumerate}
        \item $\Hom_\cat (X,-)$ preserves all limits that exist in $\cat$
        \item The contravariant functor $\Hom_\cat(-,X)$ transforms colimits in $\cat$ into limits in $\Set$.
    \end{enumerate}
\end{proposition}

\begin{proof}
    Let $\Jcat$ be a small category and $D : \Jcat \to \cat$ be a diagram. Let $F : \cat \to \Set$ be te hom-functor $\Hom_\cat (X,-)$. Let $(L,\lambda)$ be a limit cone for $D$. Then, $(F(L),F(\lambda))$ is a cone in $\Set$ over $FD$, since for any $\alpha : i\to j \in \Mor(\Jcat)$ we have the commutative diagram
    \begin{center}
        \begin{tikzcd}[column sep=tiny]
            & F(L)
                \arrow[dl,"F(\lambda)" ']
                \arrow[dr,"F(\lambda_i)"]
            \\
            \Hom_\cat(X,D(i))
                \arrow[rr,"D(\alpha) \circ -" ']
            &&
            \Hom_\cat(X,D(j))
        \end{tikzcd}
    \end{center}
    It remains to show that $(F(L),F(\lambda))$ is a limit cone for $FD$. Let $S \underset{f}{\Rightarrow} FD$ be another cone. We have $f(i) : \applic{S}{\Hom(X,D(i))}{s}{f_i(s)}$ (we work in $\Set$ so morphisms are actual maps here). Fixing $S$, we get commutative diagrams:
    \begin{center}
        \begin{tikzcd}[column sep=tiny]
            & X
                \arrow[dl,"f_i(s)" ']
                \arrow[dr,"f_j(s)"]
            \\
            D(i)
                \arrow[rr,"D(\alpha) \circ -" ']
            &&
            D(j)
        \end{tikzcd}
    \end{center}
    so $(X,f_i(s))$ is a cone over $D$ hence there exists a unique morphism $u_s : X \to L$ such that $\lambda_i \circ u_s = f_i(s)$ for all $i \in \Ob(\Jcat)$. Now set $u : \applic{S}{\Hom(X,L)}{s}{u_s}$ and we have $(F\lambda \circ u)(s) = (F\lambda)(u_s) = f$ so $u : S \to F(L)$ is a morphism of cones. We need to check it is unique. If $v$ is another one then $\lambda_i \circ v(s) = f_i(s)$ so $v(s)=u_s$ by uniqueness of $u_s$, which shows $v=u$. \\
    Another proof is given here:
    \begin{align*}
        \Hom_\cat (X,\lim D) & \simeq \Hom_{\Fun(\Jcat,\cat)} (\Delta X,D) \\
        & \simeq \Hom_{\Fun(\Jcat,\Set)} (\Delta 1,\Hom_\cat (X,D(-))
        \\
        & \simeq \Hom_\Set(1,\lim \Hom_\cat(X,D(-)))
        \\
        & \simeq \lim \Hom_\cat (X,D(-))
    \end{align*}
    ($1$ is a singleton.) The first and third isomorphisms are by definition of a limit. The last isomorphism comes from the fact that for any set $A$, maps $1 \to A$ correspond to elements of $A$. The second isomorphism works since a natural transformation $\Delta X \Rightarrow D$ is the same as a collection of morphisms $f_i : X \to D(i)$ indexed by $\Ob(\Jcat)$.
\end{proof}

\begin{theorem}
    Right adjoints preserve limits. Left adjoints preserve colimits.
\end{theorem}

\begin{proof}
    We only need to prove the statement about right adjoints and then use opposite categories for left adjoints. Let \begin{tikzcd}
        \cat \arrow[r,bend left,"F"] & \catt \arrow[l,bend left, "G"]
    \end{tikzcd} be two functors with $F \dashv G$ and $D : \Jcat \to \catt$ be a diagram, with $\eta : \Delta(\lim D) \Rightarrow D$ its limit cone. Our goal is to show that $(G\lim D,G\eta)$ is a limit cone for $G\circ D$. The fact that it is a cone above $G \circ D$ is clear. Now let $\mu : \Delta(c) \Rightarrow GD$ be another cone. For any $j \in \Ob(\Jcat)$, we have $\mu_j \in \Hom(c,GD(j))$. By adjunction, it corresponds to a morphism $\mu_j^* \in \Hom(F(c),D(j))$. We claim these morphisms make up a natural transformation $\mu^* : \Delta(F(c)) \Rightarrow D$. Indeed, for any morphism $f : i \to j \in \Mor(\Jcat)$, we have by naturality of the adjunction a commutative diagram
    \begin{center}
        \begin{tikzcd}
            \Hom(F(c),D(i))
                \arrow[r,"\sim"]
                \arrow[d,"D(f) \circ -"]
            &
            \Hom(c,GD(i))
                \arrow[d,"GD(f) \circ -"]
            \\
            \Hom(F(c),D(j))
                \arrow[r,"\sim"]
            &
            \Hom(c,GD(j))
        \end{tikzcd}
    \end{center}
    so $D(f) \circ \mu_i^* = (GD(f)\circ \mu_i)^* = \mu_j^*$. By universality of $\lim D$, there exists a unique morphism $\tau : F(c) \to \lim D$ that makes the appropriate diagram commute. Using the adjunction, we get a morphism $\tau^* : c \to G(\lim D)$, which is the morphism we are looking for. The commutativity of the appropriate diagram comes from naturality of the adjunction. Uniqueness comes from the uniqueness of $\tau$. \\
    In compact form:
    \begin{align*}
        \Hom_\cat (c,\lim GD) & \simeq \Hom_{\Fun(\Jcat,\cat)} (\Delta c,GD) \\
        & \simeq \Hom_{\Fun(\Jcat,\catt)}(F\Delta c,D) \\
        & \simeq \Hom_{\Fun(\Jcat,\catt)}(\Delta F c,D) \\
        & \simeq \Hom_\catt (Fc, \lim D) \\
        & \simeq \Hom_\cat (C,G \lim D)
    \end{align*}
\end{proof}
\newpage
\section{Tensor products}
All rings considered here are assumed to be associative and to have a multiplicative unit $1$. Let $A$ be a ring.
\begin{definition} \leavevmode
    \begin{itemize}
        \item A \emph{right $A$-module} is an abelian group $(M,+)$ with a map $\applic{M\times A}{M}{(m,a)}{m\cdot a}$ such that
        \begin{align*}
            (1) \quad & (m+n)\cdot a = m\cdot a +n\cdot a & (3)\quad & m\cdot(ab) = (m \cdot a)b \\
            (2) \quad & m \cdot (a+b) = m\cdot a + m \cdot b & (4)\quad & m\cdot 1_A = m
        \end{align*}
        by symmetry one gets the notion of a \emph{left $A$-module} (which is the equivalent of a vector space, but with a ring in place of the field).
        \item If $A,B$ are two rings, an \emph{$A$-$B$-bimodule} is an abelian group $M$ with a left $A$-module and a right $B$-module structure such that for $(a,b) \in A \times B$ and $m \in M$, $a \cdot (m\cdot b) = (a\cdot m) \cdot b$.
        \item Let $M$ be a right $A$-module, $N$ be a left $A$-module and $G$ be an abelian group. \\ A \emph{bilinear} (or \emph{balanced}) map $f : M\times N \to G$ is a map $f$ such that
        \begin{align*}
            (1) \quad & f(m_1 + m_2, n) = f(m_1,n) + f(m_2,n)\\
            (2) \quad & f(m,n_1 + n_2) = f(m,n_1) + f(m,n_2)\\
            (3) \quad & f(ma,n) = f(m,an)
        \end{align*}
    \end{itemize}
\end{definition}

The following theorem shows that there exists an abelian group $M \otimes_A N$ that is ``universal'' with respect to bilinear maps.

\begin{theorem}
    Let $M$ be a right $A$-module and $N$ be a left $A$-module. There exists an abelian group $M \otimes_A N$ together with a bilinear map $t : M \times N \to M \otimes_A N$ such that for any abelian group $G$ and bilinear map $b : M \times N \to G$, there exists a unique group homomorphism $\tilde{b}$ that makes this diagram commute:
    \begin{center}
        \begin{tikzcd}
            M \times N
                \arrow[r, "\forall b"]
                \arrow[d,"t" ']
            & G
            \\
            M \otimes_A N \arrow[ru,"\exists! \tilde{b}" ', dashed]
        \end{tikzcd}
    \end{center}
\end{theorem}

\begin{proof}
    Let $L = \Z[M\times N]$ be the free abelian group on $M\times N$. It has a basis, namely $\{(m,n) \mid m \in M, n\in N\}$. Now consider the subgroup
    \[I = \langle (m_1+m_2,n) - (m_1,n) - (m_2,n), (m,n_1+n_2) - (m,n_1) - (m,n_2), (ma,n) - (m,an)\rangle\]
    It is chosen so the relations we want hold in $\nicefrac{L}{I}$, for instance $(ma,n) = (m,an)$ in the quotient group. Set $M \otimes_A N = \nicefrac{L}{I}$ and $t : \applic{M\times N}{\nicefrac{L}{I}}{(m,n)}{[(m,n)]}$. By construction $M \otimes_A N$ is an abelian group and $t$ is bilinear. We need to check the universal property. Pick a bilinear map $b : M \times N \to G$. We have a diagram
    \begin{center}
        \begin{tikzcd}
            M\times N
                \arrow[r, "b"]
                \arrow[d,"i" ']
            &
            G
            \\
            \Z[M\times N]
                \arrow[ru,dashed,"\exists ! \tilde{b}" ']
                \arrow[d,"\pi" ']
            \\
            M \otimes_A N
                \arrow[ruu, bend right, "\exists! \overline{b}" ', dashed]
        \end{tikzcd}
    \end{center}
    where $i : (m,n) \mapsto (m,n)$ is the inclusion map and $\pi : L\to \nicefrac{L}{I}$ is the canonical projection. The map $\tilde{b}$ exists by universal property of the free abelian group. Moreover it passes to the quotient ($I \subset \ker (\tilde{b})$), so we get the map $\overline{b}$. We now check uniqueness. Let $f : M\otimes_A N \to G$ be another linear map that makes the diagram commute. Then, $f \circ \pi$ makes the top triangle commute, so by the universal property of the free abelian group, $f \circ \pi = \tilde{b}$. Applying the universal property of the quotient allows us to conclude $f = \overline{b}$.
\end{proof}

\begin{remark} \leavevmode
    \begin{enumerate}
        \item The abelian group $M \otimes_A N$ is a unique up to unique isomorphism.
        \item The class $[(m,n)] \in M \otimes_A N$ is written $m \otimes n$. It is called a ``\emph{pure tensor}''. Pure tensors generate the tensor product:
        \[x \in M\otimes_A N \iff \exists (m_i,n_i) \in M^n \times N^n, x= \sum_{i=1}^n m_i \otimes n_i\]
    \end{enumerate}
\end{remark}

\faChevronRight \space The tensor product is a functor. Precisely, it is a bifunctor $- \otimes_A - : \Mod A  \times A \Mod \to \Ab$. If $M,M'$ are two right $A$-modules, $N,N'$ are two left $A$-modules and $f : M \to M', g : N \to N'$ are linear maps, then writing $(f\otimes g)(m\otimes n) = f(m)\otimes g(n)$ gives a commutative diagram
\begin{center}
    \begin{tikzcd}[column sep=large]
        M \otimes_A N
            \arrow[r,"\id_M\otimes g"]
            \arrow[d,"f\otimes \id_N" ']
            \arrow[rd,"f\otimes g" description,dashed]
        &
        M \otimes_A N'
            \arrow[d,"f\otimes \id_{N'}"]
        \\
        M' \otimes_A N
            \arrow[r,"\id_{M'}\otimes g" ']
        &
        M' \otimes_A N'
    \end{tikzcd}
\end{center}

One needs to be careful as $M\otimes_A N$ can be defined using a quotient or a universal property. Obtaining the arrow $f \otimes g$ is easier with the universal property:

\begin{center}
    \begin{tikzcd}
        M \times N
            \ar{r}{(f,g)}
            \arrow[d,"t"]

        &
        M' \times N'
            \arrow[d, "t'"]
        \\
        M \otimes_A N
            \arrow[r, dashed, "f \otimes g"]
        &
        M' \otimes_A N'
    \end{tikzcd}
\end{center}

Since $t' \circ (f,g)$ is bilinear, we obtain the unique map $f \otimes g$ using the universal property of $M \otimes_A N$. Hence we obtain the lemma:

\begin{lemma}
    $- \otimes_A -$ is a bifunctor.
\end{lemma}

\begin{corollary}
    \begin{enumerate}
        \item If $M$ is a $B$-$A$-bimodule, then $M \otimes_A N$ is a left $B$-module
        \item If $N$ is an $A$-$C$-bimodule, then $M \otimes_A N$ is a right $C$-module
        \item If $M$ is a $B$-$A$-bimodule and $N$ is a $A$-$C$-bimodule then $M \otimes_A N$ is a $B$-$C$-bimodule.
    \end{enumerate}
\end{corollary}

\begin{proof}
    We do the proof of 1. We set $b \bullet (m \otimes n) = (bm) \otimes n$ and now we need to check that it is well defined. A good way is to fix $b \in B$ and let $\ell_b : \applic{M}{M}{m}{b\cdot m}$ and notice that $\ell_b \in \End_A(M)$. By functoriality, we get a map $\ell_b \otimes \id_N : \applic{M\otimes_A N}{M \otimes_A N}{m\otimes n}{(bm) \otimes n}$ so our action is well defined and this is a $B$-module structure on the tensor product. The proof of 2. is similar. The proof of 3. comes from the fact that $\ell_b \otimes \id_N$ and $\id_M \otimes r_c$ commutes.
\end{proof}

\begin{examples} \leavevmode
    \begin{enumerate}
        \item $A\otimes_A N \simeq N$ as left $A$-modules. Isomorphisms are given by $a \otimes n \mapsto a \cdot n$ and $n\mapsto 1\otimes n$. The well-definition of these maps comes from the universal property.
        \item If $R$ is commutative then an $R$-module $M$ is an $R$-$R$-bimodule $\applic{R\times M\times R}{(x,m,y)}{M}{mxy = myx}$ so $M\otimes_R N$ is always an $R$-module.
    \end{enumerate}
\end{examples}

\warning Over a field, $\dim(V \otimes W) = \dim(V)\dim(W)$ but this is false in general for a ring.

\begin{exercise}
    Show that $\nicefrac{\Z}{n\Z} \otimes_\Z \nicefrac{\Z}{m\Z} = \{0\}$ when $\gcd(m,n) = 1$.
\end{exercise}

\begin{theorem}[Tensor-hom adjunction]
    Let $A,B$ be two rings and $M$ be an $A$-$B$-bimodule. We have a functor $- \otimes_A M : \Mod A \to \Mod B$ and a functor $\Hom_B (M,-) : \Mod B \to \Mod A$. Then $-\otimes_A M$ is left adjoint to $\Hom_B (M,-)$.
\end{theorem}

The $A$-module structure on $\Hom_B (M,Y)$ for $Y$ a $B$-module is given by
\[\applic{\Hom_B(M,Y) \times A}{\Hom_B(M,Y)}{(f,a)}{f\cdot a : \applic{M}{Y}{m}{f(am)}}\]

\begin{proof}
    \todo
\end{proof}

\section{Additive categories}
\subsection{Preadditive and additive categories}

\begin{definition}
    A \emph{zero object} in a category $\cat$ is an object that is both final and initial.
\end{definition}

\begin{example}
    $\{0\}$ is a zero objet in $\Mod A$ for $A$ a ring.
\end{example}

\begin{definition}
    Let $k$ be a commutative ring. A \emph{$k$-category} is a category $\cat$ such that all hom-sets are $k$-modules and composition is bilinear. When $k = \Z$ we say that $\cat$ is \emph{preadditive}.
\end{definition}

\begin{remark}
    One says that $\cat$ is ``enriched'' over $\Mod k$.
\end{remark}

\begin{lemma}
    Let $\cat$ be a $k$-category. For $X,Y \in \Ob(\cat)$, the product $X \times Y$ exists iff the coproduct $X \sqcup Y$ exists. If so, they are isomorphic.
\end{lemma}

\begin{proof}
    Suppose $X \times Y$ exists. Define $i_X = (\id_X, 0) : X \to X\times Y$ and $i_Y = (0,\id_Y) : Y \to X \times Y$. We claim these maps together with the product are the coproduct of $X$ and $Y$. Let $Z \in \Ob(\cat)$ and $f : X \to Z$, $g : Y \to Z$. Then, define $f \sqcup g : X \times Y \to Z$ by $f \sqcup g = f\pi_X + g \pi_Y$. This makes this diagram commute:
    \begin{center}
        \begin{tikzcd}
            X
                \arrow[r,"i_X"]
                \arrow[rd,"f" ',bend right]
            &
            X \times Y
                \arrow[d,"f \sqcup g"]
            &
            Y
                \arrow[l,"i_Y" ']
                \arrow[ld,"g", bend left]
            \\
            & Z
        \end{tikzcd}
    \end{center}
    Now let $h : X\times Y \to Z$ be another arrow that makes the diagram commute. Then
    \[h \circ (i_X \pi_X + i_Y \pi_Y) = h i_X \pi_X + h i_Y \pi _Y = f\pi_X + g \pi_Y = f \sqcup g\]
    And uniqueness follows since $\id_{X\times Y} = i_X \pi_X + i_Y \pi_Y$. This comes from the universal property of the product and the diagram
    \begin{center}
        \begin{tikzcd}
            & X\times Y
                \arrow[ld, bend right, "\pi_X" ']
                \arrow[rd, bend left, "\pi_Y"]
                \arrow[d, "i_X \pi_X + i_Y \pi_Y" description]
            \\
            X &
            X \times Y
                \arrow[l, "\pi_X"]
                \arrow[r, "\pi_Y" ']
            & Y
        \end{tikzcd}
    \end{center}
\end{proof}

\begin{definition}
    Let $\cat$ be a $k$-category. A \emph{biproduct} of $X$ and $Y$ is an object $X \oplus Y \in \cat$ with morphisms \begin{tikzcd}
        X \arrow[r, shift left, "i_X"] &
        X \oplus Y \arrow[l, shift left, "\pi_X"] \arrow[r,shift left, "\pi_Y"] &
        Y \arrow[l,shift left,"i_Y"]
    \end{tikzcd} such that
    \begin{enumerate}
        \item $i_X \pi_X + i_Y \pi_Y = \id_{X\oplus Y}$
        \item $\pi_X i_Y = 0$, $\pi_Y i_X = 0$, $\pi_X i_X = \id_X$, $\pi_Y i_Y = \id_Y$
    \end{enumerate}
\end{definition}

\begin{definition}
    Let $k$ be a commutative ring. A \emph{$k$-additive} (or \emph{$k$-linear}) category is a $k$-category with finite products and finite coproducts.
\end{definition}

\begin{remark} \leavevmode
    \begin{enumerate}
        \item When $k = \Z$, we simply say the category is \emph{additive}.
        \item As seen above, finite products are finite coproducts and vice versa. Both are finite biproducts.
        \item For $\cat$ a $k$-category, the following are equivalent:
        \begin{enumerate}
            \item $\cat$ is $k$-additive
            \item $\cat$ has a zero object and every pair of objects has a product
            \item $\cat$ has a zero object and every pair of objects has a coproduct
            \item $\cat$ has a zero object and every pair of objects has a biproduct
        \end{enumerate}
        Moreover $(b) \iff (c) \iff (d)$, and for $(a)$ we are just missing the empty product (or coproduct), which is the zero object.
        \item If $A$ is additive there is a canonical interpretation of the group structure on $\Hom(-,-)$ using $-\oplus -$. See exercise sheets.
    \end{enumerate}
\end{remark}

\begin{examples} \leavevmode
    \begin{enumerate}
        \item[0.] The category $\Ab$ of abelian groups is additive.
        \item If $A$ is a ring (or $k$-algebra) then $\Mod A$, $A \Mod$ and finitely generated versions are $k$-additive.
        \item If $\cat$ is additive, then $\cat^\op$ is additive.
        \item If $\cat$ is additive and $I$ is a category then $\Fun(I,\cat)$ is additive.
        \item If $A$ is a ring, then the category $BA$ with one object $\bullet$ and $\Hom(\bullet,\bullet) = A$ is preadditive but not additive. 
    \end{enumerate}
\end{examples}

\begin{definition}
    Let $F : \cat \to \catt$ be a functor between two $k$-linear categories. The functor $F$ is said to be \emph{$k$-linear} (or \emph{additive} when $k = \Z$) if for any $X,Y \in \Ob(\cat)$, $\applic{\Hom(X,Y)}{\Hom(FX,FY)}{f}{F(f)}$ is a $k$-linear map.
\end{definition}

\begin{proposition}
    A functor $F : \cat \to \catt$ is additive if and only if $F(0) \simeq 0$ and $F(X \oplus Y) \simeq F(X) \oplus F(Y)$.
\end{proposition}

\begin{proof}
    Suppose $F$ is additive. $\id_0$ is the zero morphism of $\Hom_\cat (0,0)$. Therefore $F(\id_0) = \id_{F(0)}$ is the zero morphism of $\Hom_\catt (F(0),F(0))$. For any $Y \in \Ob(\catt)$ and $f : F(0) \to Y$, $f = f\id_{F(0)} = 0$. This shows $F(0)$ is initial. A similar reasoning shows it is final. Therefore $F(0)$ is isomorphic to the zero object of $\catt$. Now let \begin{tikzcd}
        X \arrow[r, shift left, "i_X"] &
        X \oplus Y \arrow[l, shift left, "\pi_X"] \arrow[r,shift left, "\pi_Y"] &
        Y \arrow[l,shift left,"i_Y"]
    \end{tikzcd} be a biproduct in $\cat$. Then we have a diagram
    \begin{center}
        \begin{tikzcd}
            F(X) \arrow[r, shift left, "F(i_X)"] &
            F(X \oplus Y) \arrow[l, shift left, "F(\pi_X)"] \arrow[r,shift left, "F(\pi_Y)"] &
            F(Y) \arrow[l,shift left,"F(i_Y)"]
        \end{tikzcd}
    \end{center}
    And the relations we require for this diagram to be a biproduct are satisfied since $F$ is additive and $X \oplus Y$ is a biproduct. \\
    Now assume $F(0) \simeq 0$ and $F(X \oplus Y) \simeq F(X) \oplus F(Y)$ for all $X,Y \in \Ob(\cat)$. Let $X,Y \in \Ob(\cat)$. \todo
\end{proof}

\begin{example}
    Let $A,B$ be two rings and $M$ be an $A$-$B$-bimodule. Then, $- \otimes_A M_B : \Mod A \to \Mod B$ is additive. This can be quickly proven using the proposition above: the functor is a left adjoint so it preserves coproducts!
\end{example}

\subsection{Chain complexes in an additive category}

In this subsection, all categories are assumed to be additive.

\begin{definition}
    A \emph{chain complex} in $\cat$ is a collection $C_\bullet = \{C_n \mid n\in \Z\}$ of objects of $\cat$ together with morphisms $\partial_n : C_n \to C_{n-1}$ of $\cat$ such that $\partial_{n-1} \circ \partial_n = 0$. The morphisms $\partial_n$ are called the \emph{differentials} of the complex. \\
    Dually, a \emph{cochain complex} in $\cat$ is a collection $C^\bullet = \{C^n \mid n\in \Z\}$ of objects of $\cat$ together with morphisms $\delta_n : C^n \to C^{n+1}$ of $\cat$ such that $\delta^{n+1} \circ \delta^n = 0$.
\end{definition}

\begin{remark}
    If $C_\bullet$ is a chain complex, then $(C')^\bullet = C_{-n}$ together with $\delta^n = \partial_{-n}$ is a cochain complex, so both notions are mathematically the same. However in practice chain and cochain complexes represent different objects so it is good to distinguish the two.
\end{remark}

\begin{definition}
    Let $C_\bullet$ and $D_\bullet$ be two chain complexes in $\cat$. A \emph{morphism of chain complexes} $f_\bullet : C_\bullet \to D_\bullet$ is a collection of morphisms $f_n : C_n \to D_n$ such that all diagrams
    \begin{center}
        \begin{tikzcd}
            \phantom{a} \arrow[r] & C_n \arrow[r,"\partial_n^C"] \arrow[d, "f_n"]
            & C_{n-1} \arrow[r] \arrow[d, "f_{n-1}"] & \phantom{a} \\
            \phantom{a} \arrow[r] & D_n \arrow[r,"\partial_n^D"] & D_{n-1} \arrow[r] & \phantom{a}
        \end{tikzcd}
    \end{center}
    commute (``$\partial f = f\partial$'').
\end{definition}

\begin{definition}
    If $\cat$ is an additive category, then the category $\Ch(\cat)$ is the category whose objects are chain complexes in $\cat$ and morphisms are morphisms of chain complexes. We also write $\Ch_\bullet (\cat)$.
\end{definition}

\begin{remark}
    One can check that $\Ch(\cat)$ is an additive category.
\end{remark}

\begin{example}
    Let $\Delta_n = \{(x_0,\dots,x_n) \in \R^{n+1} \mid \sum\limits_{i=1}^n x_i = 1 \text{ and } x_i \ge 0\} = \mathrm{Conv}(e_0,\dots,e_n)$ be the standard $n$-simplex. $\Delta_n$ appears $n+1$ times as a face of the standard $n+1$-simplex, and
    \[d^i : \applic{\Delta_n}{\Delta_{n+1}}{(x_0,\dots,x_n)}{(x_0,\dots,x_{i-1},0,x_{i+1},\dots,x_n)}\]
    is the $i$-th face map. $\Delta_n$ is a topological space, so when $X$ is a topological space we can consider
    \[\Hom_\Top (\Delta_n,X) = \{f : \Delta_n \to X \mid f \text{ continuous}\}\]
    and we get
    \[d_i : \applic{\Hom_\Top(\Delta_{n+1},X)}{\Hom_\Top(\Delta_n,X)}{\sigma}{(\Delta_{n+1} \xrightarrow{d^i} \Delta_{n} \xrightarrow{\sigma} X)}\]
    for $0 \le i \le n+1$. \\
    Singular Chain Complex \todo
\end{example}

\begin{definition}
    Singular simplices \todo
\end{definition}

\begin{example}
    Singular chain complex. \todo
\end{example}

\begin{proposition}
    $C^\sing : \Top \to \Ch_\bullet (\Ab)$ is a functor.
\end{proposition}

\begin{proof}
    \todo
\end{proof}

\paragraph{Simplicial methods}

\begin{definition} \leavevmode
    \begin{itemize}
        \item We define the \emph{simplicial category} (or \emph{simplex category}) $\Delta$ whose objects are $[n] = \{0,1,\dots,n\}$ for $n \in \N$, and $\Hom([n],[m]) = \{f : [n] \to [m] \mid f \text{ increasing}\}$. This category is equivalent to the category of non-empty, finite, totally ordered sets with increasing maps as morphisms.
        \item A \emph{simplicial set} is a contravariant functor $\Delta \to \Set$. More generally, if $\cat$ is a category, a \emph{simplicial object} in $\cat$ is a contravariant functor from $\Delta$ to $\cat$.
        \item Simplicial objects in a category $\cat$ are objects of the category $\cat^{\Delta^\op}$. We write $s\cat = \cat^{\Delta^\op}$ (so $s\Set$ is the category of simplicial sets).
        \item If $X : \Delta^\op \to \cat$ is a simplicial object, we define $X_n = X([n])$ the \emph{$n$-simplices} of $X$.
        \item In $\Delta$, we have $d^i : [n-1] \to [n]$ the injective map that ``misses $i$'', defined by
        \[d^i(k) = \begin{cases}
            k & \text{if } k < i \\
            k+1 & \text{if } k \ge i
        \end{cases}\]
    \end{itemize}
\end{definition}

\begin{proposition}
    We have $d^i \circ d^j = d^{j+1} \circ d^i$ when $i\le j$.
\end{proposition}

\begin{proof}
    You can do it. I believe in you. (\todo)
\end{proof}

If $X : \Delta^\op \to \Ab$ is a simplicial abelian group, then we can define $(X_\bullet,d)$ with $X_n = X([n])$ and $d_n : \applic{X_n}{X_{n-1}}{x}{\sum_{i=0}^n (-1)^i X(d^i)(x)}$.
\begin{proposition} \label{ccfromsab}
    If $X \in s\Ab$, then $(X_\bullet,d)$ is a chain complex of abelian groups. Moreover, $X \mapsto X_\bullet$ is a functor $s\Ab \to \Ch_\bullet (\Ab)$.
\end{proposition}

\begin{proof}
    \todo
\end{proof}

Let $s^i : \applic{[n+1]}{[n]}{k}{\begin{cases}
    k & \text{if } k \le i \\
    k-1 & \text{if } k > i
\end{cases}}$ be the map that ``hits $i$ twice''.

\begin{theorem}
    Every morphism in $\Delta$ is a composition of maps of the form $d^i$ and $s^i$. These maps are subject to the so-called \emph{simplicial} relations
    \[
    \tag{$*$}
    \begin{cases}
        d^j \circ d^i = d^i \circ d^{j-1} & i < j \quad (1) \\
        s^i \circ s^j = s^j \circ s^{i-1} & i > j \quad (2) \\
        d^i \circ s^j = \begin{cases}
            s^{j-1} \circ d^i & i < j \\
            \id & i \in \{j,j+1\} \\
            s^j \circ d^{i-1} & i > j+1
        \end{cases} \quad (3)
    \end{cases}
    \]
    \todo better typography \\
    and this is a presentation of $\Delta$ by generators and relations
\end{theorem}

This theorem says that to define a functor $F$ from $\Delta$ to $\cat$ it is enough to define $F(d^i), F(s^i)$ and show that $(*)$ holds.

\begin{proof}
    ``Voir annexe.'' \todo
\end{proof}

The maps $d^i$s generate $\Delta_\inj$ so to construct $F : \Delta_\inj^\op \to \cat$ and use proposition \ref{ccfromsab} we only need to define $F(d^i)$ and check $(1)$. 

\begin{theorem} \label{thmccfroms}
    If $F : \Delta_\inj^\op \to \Ab$ is a (semisimplicial abelian group) functor then $(F([n]),d_\bullet)$ with $d_n : \applic{F([n])}{F[n-1]}{x}{\sum_i (-1)^i F(d^i)(x)}$ is a chain complex of abelian groups. This also works if $\Ab$ is replaced by any additive category $\cat$.
\end{theorem}

\begin{examples} \leavevmode
    \begin{enumerate}
        \item Writing
        \begin{center}
            \begin{tikzcd}[row sep=tiny,/tikz/column 1/.append style={anchor=base east}
                ,/tikz/column 2/.append style={anchor=base west}
                ,/tikz/column 3/.append style={anchor=base west}]
                \Top \arrow[r] & s\Set \arrow[r] & s\Ab \\

            X \arrow[r,mapsto] & \Hom_\Top (\Delta(-),X) \arrow[r,mapsto] & \Z[\Hom_\Top (\Delta(-),X)]
            \end{tikzcd}
        \end{center}
        allows us to use the theorem to recover what we said about the singular chain complex before.
        \item Let $G$ be a finite group, and $F_n$ be the free abelian group on $G^{n+1} = \{(g_0,\dots,g_n) \mid g_i \in G\}$. $F_n$ is a $\Z[G]$-module for $g \bullet (g_0,\dots,g_n) = (gg_0,\dots,gg_n)$, so $F_n \in \Z[G]\Mod$. We define maps
        \[\partial_i : \applic{F_n}{F_{n-1}}{(g_0,\dots,g_n)}{(g_0,\dots,g_{i-1},g_{i+1},\dots,g_n)}\]
        (the map removes $g_i$). For $i < j$, we have
        \begin{align*}
            \partial_i \circ \partial_j (g_0,\dots,g_n) & = \partial_i (-,\cancel{g_j},-) = (-,\cancel{g_i},-,\cancel{g_j},-) \\
            \partial_{j-1} \circ \partial_i (g_0,\dots,g_n) & = \partial_{j-1} (-,\cancel{g_i},-) = (-,\cancel{g_i},-,\cancel{g_j},-)
        \end{align*}
        so setting $F([n]) = F_n$ and $F(d^i) = \partial_i$ defines a functor $F : \Delta_\inj^\op \to \Z[G]\Mod$. Applying theorem \ref{thmccfroms} we have $(F_n,\partial_\bullet) \in \Ch(\Z[G]\Mod)$ called the \emph{bar resolution} of $G$.
        \item Koszul complex, Hochschild complex\dots
    \end{enumerate}
\end{examples}

\begin{definition}
    Let $\cat$ be an additive category, $C_\bullet,D_\bullet \in \Ch_\bullet (\cat)$ and $f,g \in \Hom(C_\bullet,D_\bullet)$. \\ A \emph{homotopy $H$ from $f$ to $g$} is the data of maps $h_i : C_i \to D_{i+1}$ in $\cat$ such that the following diagram commutes
    \begin{center}
        \begin{tikzcd}[row sep =large,column sep=large]
            C_{n+1}
                \arrow[r,"d_{n+1}^C"]
                \arrow[d,"f_{n+1}-g_{n+1}" ']
                &
            C_n
                \arrow[r,"d_n^C"]
                \arrow[d,"f_n-g_n" description]
                \arrow[dl,"h_n" description]
                &
            C_{n-1}
                \arrow[d,"f_{n-1}-g_{n-1}"]
                \arrow[dl,"h_{n-1}" description]
                &
            \\
            D_{n+1}
                \arrow[r,"d_{n+1}^D" ']
                &
            D_n
                \arrow[r,"d_n^D" ']
                &
            D_{n-1}
        \end{tikzcd}
    \end{center}
    which means $f_n - g_n = h_{n-1}d_n^C + d_{n+1}^D h_n$ (``$f-g = hd+dh$''). We write $f \sim g$ if $f$ and $g$ are homotopic. $f$ and $g$ are \emph{homotopy equivalences} if $fg \sim \id_D$ and $gf \sim \id_C$.
\end{definition}

The motivation for this definition comes from topology. Let $f,g : X\to Y$ be continuous maps between topological spaces. We say $f$ and $g$ are homotopic if there exists a continuous map $H : X \times I \to Y$ (here $I$ is the unit interval $[0,1]$) such that $H(-,0) = f$ and $H(-,1) = g$. The map $H$ is a called a homotopy from $f$ to $g$.

\begin{theorem}
    Let $X,Y$ be two topological spaces and $f,g : X \to Y$ be two homotopic continuous maps. Then the induced maps $C^\sing(f),C^\sing(g) : C^\sing(X) \to C^\sing(Y)$ are homotopic as morphisms of chain complexes.
\end{theorem}

\begin{proof}
    \todo
\end{proof}

\begin{lemma} \label{homotopylemma}
    Let $X,Y,Z \in \Ch(\cat)$ and $f : X_\bullet \to Y_\bullet,g: Y_\bullet \to Z_\bullet$ be morphisms of chain complexes. Then $f \sim 0$ implies $g\circ f \sim 0$.
\end{lemma}

\begin{proof}
    Let $h_\bullet$ be a homotopy between $f$ and $0$. Then $g_\bullet \circ h_\bullet$ is a homotopy between $g\circ f$ and $0$.
\end{proof}

\begin{definition}
    Let $\cat$ be a category. The \emph{homotopy category $K(\cat)$ of chain complexes in $\cat$} is the category defined by $\Ob(K(\cat)) = \Ob(\Ch(\cat))$ and $\Hom_{K(\cat)} (X,Y) = \Hom_{\Ch(\cat)}(X,Y)/\sim$.
\end{definition}

Lemma \ref{homotopylemma} above shows that composition in $K(\cat)$ is well-defined: if $f \sim g$, then $f-g \sim 0$ so $h(f-g) \sim 0$, so $hf \sim hg$. In the same vein, if $f - g \sim 0$, $(f-g)h \sim 0$, so $fh \sim fg$. This shows composition in $K(\cat)$ is well-defined.

\begin{remark}\leavevmode
    \begin{enumerate}
        \item $K(\cat)$ is an additive category.
        \item \warning In general, $K(\cat)$ is a complicated object: it is a triangulated category.
    \end{enumerate}
\end{remark}

\section{Abelian categories}

\begin{definition}
    Let $\cat$ be an additive category. A \emph{kernel} of $f \in \Mor(\cat)$ is an equalizer of $(f,0)$. Dually, a \emph{cokernel} of $f$ is a coequalizer of $(f,0)$.
\end{definition}

Concretely, we have universal arrows for any $\alpha$ such that $f\alpha = 0$ (or $\alpha f = 0$ for a cokernel)

\begin{center}
    \begin{tikzcd}
        & Z \arrow[ld,dashed] \arrow[d,"\alpha"] \\
        \ker f \arrow[r,"\iota"] & X \arrow[r,"f"] & Y & X \arrow[r,"f"] & Y \arrow[r, "\pi"] \arrow[d,"\alpha"] & \coker f \arrow[ld,dashed] \\
        & & & & Z
    \end{tikzcd}
\end{center}

If we assume that every morphism in $\cat$ has a kernel and a cokernel, then
\begin{center}
    \begin{tikzcd}[column sep=small]
        \ker f \arrow[r, "\iota"] & X \arrow[r,"f"] & Y \arrow[r,"\pi"] & \coker f \\
        & \coker(\ker f) \arrow[from=u,"p"] & \ker(\coker f) \arrow[u]
    \end{tikzcd}
\end{center}
where $\coker(\ker f)$ is notation for $\coker(\iota)$ and $\ker(\coker f)$ is notation for $\ker(\pi)$. \\
Since $f \circ \iota = 0$, we have a unique map $\tilde{f} : \coker(\ker f) \to Y$  by the universal property of the cokernel.
\begin{center}
    \begin{tikzcd}[column sep=small]
        \ker f \arrow[r, "\iota"] & X \arrow[r,"f"] & Y \arrow[r,"\pi"] & \coker f \\
        & \coker(\ker f) \arrow[from=u,"p"] \arrow[ru,dashed,"\tilde{f}" ']
    \end{tikzcd}
\end{center}

And we have $\pi \circ \tilde{f} \circ p = \pi \circ f = 0$.

\begin{lemma}
    Kernels are monomorphisms and cokernels are epimorphisms.
\end{lemma}

\begin{proof}
    Draw a diagram
    \begin{center}
        \begin{tikzcd}
            W \arrow[d,shift left,"a"] \arrow[d,shift right,"b" '] \\
            \ker f \arrow[r,"\iota"] & X \arrow[r,"f"] & Y
        \end{tikzcd}     
    \end{center}
    such that $\iota a = \iota b$. Then $f\iota (a-b) = 0$, so there is a unique map $c : W \to \ker f$ such that we have a commutative diagram
    \begin{center}
        \begin{tikzcd}
            W \arrow[r d,"\iota (a-b)"] \arrow[d,dashed,"c"] \\
            \ker f \arrow[r,"\iota"] & X \arrow[r,"f"] & Y
        \end{tikzcd}  
    \end{center}
    However $a-b$ and $0$ already make the diagram commute, so $a-b = 0$, so $a = b$. \\
    The proof that a cokernel is an epimorphism is similar.
\end{proof}

Hence, $\pi \circ \tilde{f} \circ p = \pi \circ f = 0 = 0 \circ p$ means that $\pi \circ \tilde{f} = 0$ since $p$ is an epimorphism. This means that $\tilde{f}$ factorizes through $\ker(\coker f)$. Setting $\coim f = \coker(\ker f)$ and $\im f = \ker(\coker f)$, we obtain the following commutative diagram
\begin{center}
    \begin{tikzcd}
        \ker f \arrow[r, "\iota"] & X \arrow[r,"f"] & Y \arrow[r,"\pi"] & \coker f \\
        & \coim f \arrow[from=u] \arrow[r, dashed, "\overline{f}" ']  & \im f \arrow[u]
    \end{tikzcd}
\end{center}

\begin{example}
    In $\cat = A\Mod$, we have the canonical factorization
    \begin{center}
        \begin{tikzcd}
            \ker f \arrow[r, "\iota"] & X \arrow[r,"f"] & Y \arrow[r,"\pi"] & \nicefrac{Y}{\im f} \\
            & \nicefrac{X}{\ker f} \arrow[from=u] \arrow[r, dashed, "\overline{f}" ']  & \im f \arrow[u]
        \end{tikzcd}
    \end{center}
    and $\overline{f}$ is an isomorphism by the first isomorphism theorem.
\end{example}

\begin{definition}
    Let $\cat$ be an additive category. Then $\cat$ is \emph{abelian} if
    \begin{enumerate}
        \item Every morphism has a kernel and a cokernel in $\cat$.
        \item $\forall f : X \to Y$, the canonical morphism $\overline{f} : \coim f \to \im f$ is an isomorphism.
    \end{enumerate}
\end{definition}

\begin{examples}\leavevmode
    \begin{enumerate}
        \item If $A$ is a ring, $\Mod A$ is abelian. If $A$ is noetherian, then the full subcategory $\mathbf{mod}A$ of finitely generated modules is abelian.
        \item If $\cat$ is abelian, then so is $\cat^\op$.
        \item There are examples of categories that satisfy $1$ but not $2$. For instance, Hausdorff topological abelian groups, where kernels are given by the usual kernel and cokernels are the quotients by the closure of the image. We have
        \begin{center}
            \begin{tikzcd}
                0 \arrow[r] & \Q \arrow[r,hookrightarrow] \arrow[d] & \R \arrow[r] & 0 \\
                & \Q \arrow[r,"\not \simeq"] & \R \arrow[u,hookrightarrow]
            \end{tikzcd}
        \end{center}
    \end{enumerate}
\end{examples}

\begin{proposition}
    Let $\Acat$ be an abelian category and $\Jcat$ a small category. Then
    \begin{enumerate}
        \item $\Fun(\Jcat,\Acat)$ is an abelian category.
        \item $\Ch_\bullet (\Acat)$ is an abelian category.
    \end{enumerate}
\end{proposition}

\begin{proof}[Sketch of proof]
    Let $F,G \in \Fun(\Jcat,\Acat)$ and $\eta : F \Rightarrow G$. We want to construct $\ker \eta$. For any morphism $f : i \to j \in \Mor(\Jcat)$, we have a diagram
    \begin{center}
        \begin{tikzcd}
            \ker(\eta_i)
                \arrow[r,"\iota_i"]
                \arrow[d,dashed,"\alpha_f"]
            &
            F(i)
                \arrow[r,"\eta_i"]
                \arrow[d,"F(f)"]
            &
            G(i)
                \arrow[d,"G(f)"]
            \\
            \ker(\eta_j)
                \arrow[r,"\iota_j"]
            &
            F(j)
                \arrow[r,"\eta_j"]
            &
            G(j)
        \end{tikzcd}
    \end{center}
    We have $0 = G(f) \eta_i \iota = \eta_j F(f) \iota$ so $F(f)\iota$ factorizes through $\ker(\eta_j)$, which gives the morphism $\alpha_f$. One can check $\ker(\eta)$, defined by $\ker(\eta)(i)=\ker(\eta_i)$ and $\ker(\eta)(f)=\alpha_f$ is a functor (this is proved using uniqueness of $\alpha_f$). One can check that $\iota : \ker(\eta) \Rightarrow F$ is a kernel of $\eta$ by drawing the adequate diagrams. Constructing cokernels is done similarly. The canonical factorization is an isomorphism since its evaluation at every object is an isomorphism because $\Acat$ is abelian. \\
    $\Ch_\bullet(\Acat)$ is a subcategory of $\Fun(\Z,\Acat)$ so kernels and cokernels exist in $\Fun(\Z,\Acat)$. There is a commutative diagram
    \begin{center}
        \begin{tikzcd}[column sep=small]
            \ker f_{i+1}
                \arrow[r,"\alpha_{i+1}",dashed]
                \arrow[d]
            &
            \ker f_{i}
                \arrow[r,"\alpha_{i}",dashed]
                \arrow[d]
            &
            \ker f_{i-1}
                \arrow[d]
            \\
            C_{i+1}
                \arrow[r,"d_{i+1}"]
                \arrow[d,"f_{i+1}"]
            &
            C_{i}
                \arrow[r,"d_{i}"]
                \arrow[d,"f_i"]
            &
            C_{i-1}
                \arrow[d,"f_{i-1}"]
            \\
            D_{i+1}
                \arrow[r,"d_{i+1}"]
                \arrow[d]
            &
            D_{i}
                \arrow[r,"d_{i}"]
                \arrow[d]
            &
            D_{i-1}
                \arrow[d]
            \\
            \coker f_{i+1}
                \arrow[r,"\beta_{i+1}" ',dashed]
            &
            \coker f_{i}
                \arrow[r,"\beta_{i}" ',dashed]
            &
            \coker f_{i-1}
        \end{tikzcd}
    \end{center}
    And the universal property of $\ker(f_{i-1})$ means that $\alpha_i \alpha_{i-1}$ is the unique morphism induced by $d_{i+1} d_i = 0$, so $\alpha_i \alpha{i-1} = 0$ and kernels, cokernels of chain complexes are again chain complexes.
\end{proof}

\begin{remark} \leavevmode
    \begin{enumerate}
        \item There is another equivalent definition of abelian categories: a category is abelian iff it is preabelian (additive, and all kernels/cokernels exist) and every monomorphism is a kernel of some morphism and every epimorphism is a cokernel of some morphism.
        \item Abelian categories have finite limits and colimits.
        \item If $f \in \Mor(\Acat)$ with $\Acat$ abelian, then $f$ is a monomorphism if and only if $\ker f = 0$ and $f$ is an epimorphism if and only if $\coker f = 0$. Moreover, a monomorphism that is also an epimorphism is an isomorphism.
    \end{enumerate}
\end{remark}

Let $X \xrightarrow{f} Y \xrightarrow{g} Z$ be two composable morphisms in an abelian category such that $gf = 0$. The left diagram below shows that $0 = gf = g\alpha \overline{f} \pi = 0$, however $\overline{f} \pi$ is an epi so $g\alpha = 0$. Therefore, $\alpha$ factorizes into a map $\im f \to \ker g$ as shown in the right diagram.
\begin{center}
    \begin{tikzcd}
        X
            \arrow[r, "f"]
            \arrow[d,"\pi", two heads]
        &
        Y
            \arrow[r,"g"]
        &
        Z
        \\
        \coim f
            \arrow[r,"\overline{f}" ']
        &
        \im f
            \arrow[u,"\alpha" ',hookrightarrow]
    \end{tikzcd} \hspace{3em}
    \begin{tikzcd}
        \ker g
            \arrow[r, "\iota", hookrightarrow]
        &
        Y
            \arrow[r,"g"]
        &
        Z
        \\
        &
        \im f
            \arrow[u,"\alpha" ',hookrightarrow]
            \arrow[lu,"\exists! \overline{\alpha}",dashed]
    \end{tikzcd}
\end{center}

\begin{definition}
    Let $X \xrightarrow{f} Y \xrightarrow{g} Z$ such that $gf = 0$.
    \begin{itemize}
        \item We say it is \emph{exact} if the canonical map $\im f \to \ker g$ is an isomorphism.
        \item A chain complex $(C_\bullet,d_\bullet)$ is \emph{exact} if the canonical maps $\Im(d_i) \simeq \ker(d_i)$ are isomorphisms for all $i \in \Z$. 
        \item A \emph{short exact sequence} if an exact complex of the form $0 \to X \xrightarrow{f} Y \xrightarrow{g} Z \to 0$.
    \end{itemize}
\end{definition}

\begin{example}
    In $\Mod A$, $gf = 0$ means that $\im f \subset \ker g$, so exactness is equivalent to $\im f = \ker g$.
\end{example}

\begin{remark}
    $0 \to X \xrightarrow{f} Y \xrightarrow{g} Z$ is exact if and only if $f = \ker g$. \\
    The sequence $0 \to X \xrightarrow{f} Y \xrightarrow{g} Z \to 0$ is exact if and only if $f$ is a monomorphism, $g$ is an epimorphism and $\im f \xrightarrow{\sim} \ker g$ is an isomorphism, which is equivalent to $g = \coker f$ and $f = \ker g$.
\end{remark}

\begin{remark}
    There is a difficult theorem of Freyd and Mitchell that says any abelian category can be seen as a full subcategory of $\Mod A$ for some ring $A$ in such a way that the abelian structure is induced by the usual one in $\Mod A$.
\end{remark}

\begin{definition}
    Let $\Acat$ be an abelian category and $0 \to A \xrightarrow{f} B \xrightarrow{g} C \to 0$, $0 \to D \xrightarrow{h} E \xrightarrow{k} F \to 0$ be two short exact sequences. A \emph{morphism of short exact sequences} between them is the data of three morphisms $\alpha : A \to D$, $\beta : B\to E$ and $\gamma : C \to F$ such that the following diagram commutes:
    \begin{center}
        \begin{tikzcd}
            0 \arrow[r] & A \arrow[r,"f"] \arrow[d,"\alpha"] & B \arrow[r,"g"] \arrow[d,"\beta"] & C \arrow[r] \arrow[d,"\gamma"] & 0 \\
            0 \arrow[r] & D \arrow[r,"h"] & E \arrow[r, "k"] & F \arrow[r] & 0
        \end{tikzcd}
    \end{center}
\end{definition}

\begin{lemma}[Short five lemma]
    Using the same notations as in the definition above:
    \begin{itemize}
        \item If $\alpha$ and $\gamma$ are monomorphisms, so is $\beta$.
        \item If $\alpha$ and $\gamma$ are epimorphisms, so is $\beta$.
        \item If $\alpha$ and $\gamma$ are isomorphisms, so is $\beta$.
    \end{itemize}
\end{lemma}
We give two proofs of this result.
\begin{proof}[Proof by diagram chase]
    Assume we work in a category of modules $\Mod A$. Assume $\alpha,\gamma$ are monos. Let $x \in \ker \beta$. Then $\gamma g(x) = k\beta (x)=0$ and $\gamma$ is a mono so $g(x) = 0$. By exactness at $B$, there exists $y \in A$ such that $f(y) = x$. Then $0 = \beta f(y) = h \alpha(y)$. By exactness at $D$, $h$ is a mono, so $\alpha(y) = 0$. since $\alpha$ is a mono, $y = 0$, so $x=0$, which means $\beta$ is a mono. \\
    Now assume $\alpha,\gamma$ are epis. Let $x \in E$. Since $\gamma,g$ are epis, there exists $y \in B$ such that $\gamma(g(y)) = k(x)$. Then, $k(\beta(y)-x) = 0$. By exactness at $E$ and since $\alpha$ is epi, there exists $z \in A$ such that $h(\alpha(z)) = \beta(y) - x$. Therefore $\beta f(z) = \beta(y) - x$, so $\beta(y - f(z)) = x$ and $\beta$ is epi.
\end{proof}

\begin{proof}[Categorical proof in any abelian category]
    Assume $\alpha,\gamma$ are monos. Let us add $\ker \beta$ to the diagram.
    \begin{center}
        \begin{tikzcd}
            & & \ker \beta \arrow[d,"i"] \arrow[ld,dashed,"\exists j" '] \\
            0 \arrow[r] & A \arrow[r,"f"] \arrow[d,"\alpha"] & B \arrow[r,"g"] \arrow[d,"\beta"] & C \arrow[r] \arrow[d,"\gamma"] & 0 \\
            0 \arrow[r] & D \arrow[r,"h"] & E \arrow[r, "k"] & F \arrow[r] & 0
        \end{tikzcd}
    \end{center}
    We have $\beta i = 0$, so $\gamma g i = k \beta i = 0$. Since $\gamma$ is a mono, $gi = 0$. Exactness tells us $f = \ker g$, so we obtain the map $j : \ker \beta \to A$ with the universal property of $\ker g$. Since the diagram commutes, $0 = \beta i = \beta f j = h \alpha j$. Since $h$ and $\alpha$ are both monos, $j = 0$, so $i = 0$, so $\beta$ is a mono. \\
    Now assume $\alpha,\gamma$ are epis and consider the commutative diagram
    \begin{center}
        \begin{tikzcd}
            0 \arrow[r] & A \arrow[r,"f"] \arrow[d,"\alpha"] & B \arrow[r,"g"] \arrow[d,"\beta"] & C \arrow[r] \arrow[d,"\gamma"] & 0 \\
            0 \arrow[r] & D \arrow[r,"h"] & E \arrow[r, "k"] & F \arrow[r] & 0 \\
            & & \coker \beta \arrow[from=u,"\pi"] \arrow[from=ru,dashed,"\exists \eta"]
        \end{tikzcd}
    \end{center}
    We have $\pi \beta = 0$, so $\pi \beta f = \pi h \alpha = 0$. Since $\alpha$ is an epi, $\pi h = 0$. Exactness tells us $k = \coker h$, which gives us $\eta$. Then, $\eta k \beta = 0$, so $\eta \gamma g = 0$. Since $\gamma,g$ are epis, $\eta = 0$, so $\pi = 0$, so $\beta$ is an epi.
\end{proof}

\begin{theorem}[Splitting lemma]
    Let $0 \to A \xrightarrow{f} B \xrightarrow{g} C \to 0$ be a short exact sequence in an abelian category $\Acat$. The following are equivalent:
    \begin{enumerate}
        \item[(1)] $\exists r : B \to A, rf = \id_A$ 
        \item[(2)] $\exists s : C \to B, gs = \id_C$
        \item[(3)] $\exists h : B \xrightarrow{\sim} A \oplus C$ such that
        \begin{center}
            \begin{tikzcd}
                0 \arrow[r] & A \arrow[r,"f"] \arrow[d,equal] & B \arrow[r,"g"] \arrow[d,"h"] & C \arrow[r] \arrow[d,equals] & 0 \\
            0 \arrow[r] & A \arrow[r,"i_A"] & A \oplus C \arrow[r, "\pi_C"] & C \arrow[r] & 0
            \end{tikzcd}
        \end{center}
        is an isomorphism of short exact sequences.
    \end{enumerate}
    When these conditions are satisfied, we say the short exact sequence \emph{splits}.
\end{theorem}

\begin{proof}
    Assume we have (3). Then we have the projection $\pi_A : A \oplus C \to A$. Letting $r = \pi_A h$, we have $rf = \pi_A h f = \pi_A i_A = \id_A$. Similarly, setting $s = h^{-1} i_C$ gives $gs = \pi_C h h^{-1} i_C = \id_C$. \\
    Now assume (1). We have $r : B \to A$ and $g : B \to C$. This gives a morphism $r \oplus g : B \to A \oplus C$ defined by $r \oplus g = i_A r + i_C g$. Then, $(r \oplus g)f = i_A$ since $gf = 0$ and $\pi_C (r \oplus g) = g$ by properties of the biproduct. This means that $r\oplus g$ makes the diagram above commute. The short five lemma then tells us $r\oplus g$ is an isomorphism. \\
    Assume (2). Then $f : A \to B$ and $s : C \to B$ induce a morphism $f \oplus s : A \oplus C \to B$ defined by $f \oplus s = f \pi_A + s \pi_C$. This morphism satisfies
    \[(f\oplus s)i_A = f \quad \text{and} \quad g (f\oplus s) = \pi_C\]
    so again we get an isomorphism of short exact sequences by the short five lemma.
\end{proof}

\begin{definition}
    Let $\cat$ and $\catt$ be two abelian categories. Let $F : \cat \to \catt$ be a functor.
    \begin{enumerate}
        \item We say $F$ is \emph{left exact} if $F$ preserves finite limits.
        \item We say $F$ is \emph{right exact} if $F$ preserves finite colimits.
        \item We say $F$ is \emph{exact} if it preserves finite limits and finite colimits.
    \end{enumerate}
\end{definition}

\begin{lemma}
    Let $F : \cat \to \catt$ be an additive functor between abelian categories. The following are equivalent;
    \begin{enumerate}
        \item[(1)] The functor $F$ is left exact.
        \item[(2)] The functor $F$ preserves kernels i.e. $F(\ker f) \simeq \ker(F(f))$.
        \item[(3)] If $0 \to X \xrightarrow{f} Y \xrightarrow{g} Z$ is an exact sequence in $\cat$, the sequence $0 \to F(X) \xrightarrow{F(f)} F(Y) \xrightarrow{F(g)} F(Z)$ is also exact.
        \item[(4)] If $0 \to X \xrightarrow{f} Y \xrightarrow{g} Z \to 0 $ is a short exact sequence in $\cat$, the sequence $0 \to F(X) \xrightarrow{F(f)} F(Y) \xrightarrow{F(g)} F(Z)$ is also exact.
    \end{enumerate}
\end{lemma}

\begin{proof} \leavevmode
    \begin{itemize}
        \item[$(1) \Rightarrow (2)$] This is clear since a kernel is a limit (an equalizer).
        \item[$(2) \Rightarrow (3)$] Assume we have (2). Then $0 \to X \xrightarrow{f} Y \xrightarrow{g} Z$ is an exact sequence in $\cat$ if and only if $f = \ker g$, so $F(f)$ is a kernel of $F(g)$, so $0 \to F(X) \xrightarrow{F(f)} F(Y) \xrightarrow{F(g)} F(Z)$ is exact.
        \item[$(3) \Rightarrow (4)$] This is clear.
        \item[$(2) \Rightarrow (1)$] The functor $F$ is additive so it preserves products. The equalizer of \begin{tikzcd}[column sep = small]
            X \arrow[r,"f", shift left] \arrow[r,"g" ',shift right] & Y
        \end{tikzcd} is the kernel of $f-g$, so $F$ preserving kernels means it also preserves equalizers. Since any finite limit can be built out of products and equalizers, $F$ is left-exact.
        \item[$(4) \Rightarrow (3)$] Let $0 \to X \xrightarrow{f} Y \xrightarrow{g} Z$ be an exact sequence. Consider $0 \to X \xrightarrow{f} Y \to \coker(f) \to 0$. Applying $F$ shows that $F(f)$ is a monomorphism, so $F$ preserves monos. Moreover we have the exact sequence $0 \to X \xrightarrow{f} Y \xrightarrow{\overline{g}} \Im g \to 0$ so $0 \to F(X) \xrightarrow{F(f)} F(Y) \xrightarrow{F(\overline{g})} F(\Im g)$ is also exact.
        \todo : FINISH This
        \todo : UNDERSTAND ABOVE REMARK
    \end{itemize}

\end{proof}

\end{document}